<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Code Prettier - ì½”ë“œ ë³€í™˜ ë„êµ¬</title>
  <meta name="description" content="ê¸°ì¡´ ì½”ë“œë¥¼ ìƒˆë¡œìš´ ì½”ë“œë¡œ ë³€í™˜í•˜ê³  ì°¨ì´ì ì„ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë„êµ¬">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link rel="icon" type="image/svg+xml" href="assets/images/favicon.svg">
  <link rel="stylesheet" href="assets/css/common.css">
  <link rel="stylesheet" href="assets/css/site-ui.css">
  
  <style>
    .prettier-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .prettier-header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 12px;
    }
    
    .prettier-header h1 {
      margin: 0 0 10px 0;
      font-size: 2.2em;
    }
    
    .prettier-header p {
      margin: 0;
      opacity: 0.9;
      font-size: 1.1em;
    }
    
    .prettier-main {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .code-panel {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    
    .panel-header {
      background: #f8f9fa;
      padding: 15px 20px;
      border-bottom: 1px solid #e9ecef;
      font-weight: 600;
      color: #495057;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .panel-header .badge {
      background: #007bff;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: normal;
    }
    
    .code-textarea {
      width: 100%;
      height: 400px;
      border: none;
      padding: 20px;
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.5;
      resize: vertical;
      background: #fafafa;
      color: #333;
      box-sizing: border-box;
    }
    
    .code-textarea:focus {
      outline: none;
      background: white;
    }
    
    .transform-controls {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    
    .control-group {
      margin-bottom: 15px;
    }
    
    .control-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      color: #495057;
    }
    
         .control-group input {
       width: 100%;
       padding: 8px 12px;
       border: 1px solid #ced4da;
       border-radius: 4px;
       font-size: 14px;
       box-sizing: border-box;
     }
    
    .control-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn-primary {
      background: #007bff;
      color: white;
    }
    
    .btn-primary:hover {
      background: #0056b3;
    }
    
    .btn-success {
      background: #28a745;
      color: white;
    }
    
    .btn-success:hover {
      background: #1e7e34;
    }
    
    .btn-secondary {
      background: #6c757d;
      color: white;
    }
    
    .btn-secondary:hover {
      background: #545b62;
    }
    
    .diff-panel {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    
    .diff-content {
      padding: 20px;
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.6;
      white-space: pre-wrap;
      max-height: 500px;
      overflow-y: auto;
    }
    
    .diff-line {
      padding: 2px 0;
      margin: 0;
    }
    
    .diff-added {
      background: #d4edda;
      color: #155724;
      padding: 2px 8px;
      margin: 1px 0;
      border-left: 3px solid #28a745;
    }
    
    .diff-removed {
      background: #f8d7da;
      color: #721c24;
      padding: 2px 8px;
      margin: 1px 0;
      border-left: 3px solid #dc3545;
      text-decoration: line-through;
    }
    
    .diff-unchanged {
      color: #6c757d;
      padding: 2px 8px;
    }
    
    .result-panel {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .result-content {
      padding: 20px;
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.6;
      white-space: pre-wrap;
      background: #f8f9fa;
      max-height: 500px;
      overflow-y: auto;
      border-radius: 0 0 8px 8px;
    }
    
    .comment-highlight {
      background: #fff3cd;
      border-left: 3px solid #ffc107;
      padding: 2px 4px;
      margin: 1px 0;
    }
    
    .preset-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    
         .btn-preset {
       padding: 8px 16px;
       background: #f8f9fa;
       border: none;
       border-radius: 6px;
       font-size: 13px;
       font-weight: 600;
       color: #495057;
       cursor: pointer;
       transition: all 0.2s ease;
       box-shadow: 0 2px 4px rgba(0,0,0,0.1);
     }
     
     .btn-preset:hover {
       background: #007bff;
       color: white;
       transform: translateY(-1px);
       box-shadow: 0 4px 8px rgba(0,123,255,0.3);
     }
    
    .stats {
      display: flex;
      gap: 20px;
      margin-bottom: 15px;
      font-size: 14px;
      color: #6c757d;
    }
    
    .stat-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .stat-number {
      font-weight: 600;
      color: #007bff;
    }
    
         /* í”Œë¡œíŒ… ë²„íŠ¼ - index.html ë¹ ë¥¸ ë„ì… ë²„íŠ¼ê³¼ ë™ì¼í•œ ìŠ¤íƒ€ì¼ */
     .floating-vimeo-btn {
       position: fixed;
       right: 2.2rem;
       bottom: 2.2rem;
       z-index: 1200;
       display: flex;
       align-items: center;
       gap: 0.6em;
       background: #1976d2;
       color: #fff;
       border: none;
       border-radius: 2em;
       box-shadow: 0 2px 12px 0 #1976d233;
       padding: 0.7em 1.4em;
       font-size: 1.08em;
       font-weight: 500;
       cursor: pointer;
       transition: background 0.18s, box-shadow 0.18s;
     }
     
     .floating-vimeo-btn:hover, 
     .floating-vimeo-btn:focus {
       background: #1565c0;
       box-shadow: 0 4px 16px 0 #1976d244;
     }

     @media (max-width: 768px) {
       .prettier-main {
         grid-template-columns: 1fr;
       }
       
       .control-buttons {
         justify-content: center;
       }
       
       .preset-buttons {
         justify-content: center;
       }
       
       /* ì‚¬ìš© ì˜ˆì‹œ ë°˜ì‘í˜• */
       .usage-examples [style*="grid-template-columns: 1fr 1fr"] {
         display: block !important;
       }
       
       .usage-examples [style*="grid-template-columns: 1fr 1fr"] > div:first-child {
         margin-bottom: 20px;
       }
     }

     @media (max-width: 600px) {
       .floating-vimeo-btn {
         right: 1rem;
         bottom: 1rem;
         font-size: 0.98em;
         padding: 0.6em 1em;
       }
     }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <div class="header-center">
        <div class="logo">
          <a href="index.html">
            <img src="assets/images/logo.png" alt="Adapt Style Guide">
          </a>
        </div>
      </div>
      <nav class="main-nav">
        <ul>
          <li><a href="index.html">ë©”ì¸ ë°ëª¨</a></li>
          <li><a href="custom-guide.html">ì»¤ìŠ¤í…€ ì—˜ë¦¬ë¨¼íŠ¸ ê°€ì´ë“œ</a></li>
          <li><a href="code-prettier.html" class="active">Code Prettier</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <div class="prettier-container">
    <div class="transform-controls">
      <div class="preset-buttons">
        <button class="btn-preset" onclick="setPreset('selective')">ğŸ¯ ì„ íƒì  ë³€ê²½</button>
        <button class="btn-preset" onclick="setPreset('date')">ğŸ“… ë‚ ì§œ ë³€ê²½</button>
        <button class="btn-preset" onclick="setPreset('image')">ğŸ“· ì´ë¯¸ì§€ ê²½ë¡œ ë³€ê²½</button>
      </div>
      
      <!-- ì •ê·œì‹ íŒ¨í„´ ì„¤ëª… -->
      <div style="background: #e3f2fd; padding: 12px 16px; border-radius: 6px; margin-bottom: 15px; border-left: 4px solid #1976d2;">
        <div style="font-size: 14px; color: #333; margin-bottom: 8px;"><strong>ğŸ’¡ ì •ê·œì‹ íŒ¨í„´ ì„¤ëª…</strong></div>
        <div style="font-family: monospace; font-size: 13px; color: #555;">
          <div><strong>ì°¾ì„ í…ìŠ¤íŠ¸:</strong> <code>/250617\/(01|02|03|04)\.(jpg|png)/g</code></div>
          <div style="margin-top: 6px; color: #333;"><strong>ë°”ê¿€ í…ìŠ¤íŠ¸ ì˜ˆì‹œ:</strong> <code>250701</code</div>
          <div style="margin: 8px 0; font-size: 12px; color: #666;">
            <span style="background: #fff3e0; padding: 2px 6px; border-radius: 3px;">$1 = íŒŒì¼ë²ˆí˜¸ (01|02|03|04)</span> 
            <span style="background: #fff3e0; padding: 2px 6px; border-radius: 3px; margin-left: 8px;">$2 = í™•ì¥ì (jpg|png)</span>
          </div>
        </div>
      </div>
      
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 24px;">
        <div class="control-group">
          <label for="findText">ì°¾ì„ í…ìŠ¤íŠ¸ (ì •ê·œì‹ ì§€ì›)</label>
          <input type="text" id="findText" placeholder="ì˜ˆ: /250617\/(23|25)\.(jpg|png)/g" autocomplete="off" />
        </div>
        <div class="control-group">
          <label for="replaceText">ë°”ê¿€ í…ìŠ¤íŠ¸</label>
          <input type="text" id="replaceText" placeholder="ì˜ˆ: 250701" autocomplete="off" />
        </div>
      </div>
      
      <div class="control-group">
        <label for="commentText">ì£¼ì„ ë‚´ìš© (ì„ íƒì‚¬í•­)</label>
        <input type="text" id="commentText" placeholder="ì˜ˆ: íŠ¹ì • ì´ë¯¸ì§€ë§Œ ë‚ ì§œ ë³€ê²½" autocomplete="off" />
      </div>
      
      <div class="control-buttons">
        <button class="btn btn-primary" onclick="transformCode()">
          ğŸ”„ ì½”ë“œ ë³€í™˜
        </button>
        <button class="btn btn-secondary" onclick="clearAll()">
          ğŸ—‘ï¸ ì „ì²´ ì´ˆê¸°í™”
        </button>
        <button class="btn btn-success" onclick="copyResult()" id="copyBtn" style="display: none;">
          ğŸ“‹ ê²°ê³¼ ë³µì‚¬
        </button>
      </div>
    </div>



    <div class="prettier-main">
      <div class="code-panel">
        <div class="panel-header">
          ê¸°ì¡´ ì½”ë“œ
          <span class="badge">Original</span>
        </div>
        
        <!-- URL ì…ë ¥ ê¸°ëŠ¥ -->
        <div style="margin-bottom: 15px; padding: 12px; background: #f8f9fa; border-radius: 6px; border-left: 4px solid #007bff;">
          <div style="display: flex; gap: 10px; align-items: stretch;">
            <input type="text" id="pageUrl" autocomplete="off" placeholder="@ URL ì…ë ¥ (ì˜ˆ: https://95problems.com/product/...)" 
                   style="flex: 1; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; font-size: 13px; box-sizing: border-box;" />
            <button onclick="fetchPageContent()" style="background: #ff9800; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; white-space: nowrap; font-size: 14px; height: auto; min-height: 38px; display: flex; align-items: center; justify-content: center; margin-top: 0;">
              âš ï¸ í”„ë¡ì‹œ
            </button>
            <button onclick="previewCode()" id="previewBtn" style="background: #17a2b8; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; white-space: nowrap; font-size: 14px; height: auto; min-height: 38px; display: flex; align-items: center; justify-content: center; margin-top: 0;">
              ğŸ“± ë¯¸ë¦¬ë³´ê¸°
            </button>
          </div>
          <small style="color: #666; font-size: 11px; margin-top: 6px; display: block;">
            ğŸ’¡ URL ì…ë ¥ â†’ í”„ë¡ì‹œë¡œ ìë™ ê°€ì ¸ì˜¤ê¸° ë˜ëŠ” ì§ì ‘ ì½”ë“œ ì…ë ¥ í›„ ë¯¸ë¦¬ë³´ê¸°
          </small>
        </div>
        
        <textarea 
          class="code-textarea" 
          id="originalCode" 
          placeholder="ê¸°ì¡´ ì½”ë“œë¥¼ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”...&#10;&#10;ë˜ëŠ” ìœ„ì˜ URL ì…ë ¥ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì„¸ìš”&#10;&#10;ì˜ˆì‹œ:&#10;<img src='/images/old/logo.png' alt='ë¡œê³ '>&#10;<div class='old-class'>ë‚´ìš©</div>"
        ></textarea>
      </div>
      
      <div class="code-panel">
        <div class="panel-header">
          ìƒˆë¡œìš´ ì½”ë“œ
          <span class="badge" style="background: #28a745;">Modified</span>
        </div>
        <textarea 
          class="code-textarea" 
          id="newCode" 
          placeholder="ë³€í™˜ëœ ì½”ë“œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤..."
          readonly
          style="height: 520px;"
        ></textarea>
      </div>
    </div>

    <div class="diff-panel">
      <div class="panel-header">
        ë³€ê²½ì  ë¹„êµ
        <div class="stats" id="diffStats" style="display: none;">
          <div class="stat-item">
            <span style="color: #28a745;">â•</span>
            <span class="stat-number" id="addedLines">0</span>
            <span>ì¶”ê°€</span>
          </div>
          <div class="stat-item">
            <span style="color: #dc3545;">â–</span>
            <span class="stat-number" id="removedLines">0</span>
            <span>ì‚­ì œ</span>
          </div>
        </div>
      </div>
      <div class="diff-content" id="diffContent">
        ì—¬ê¸°ì—ì„œ ë³€ê²½ì ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </div>
    </div>

    <div class="result-panel">
      <div class="panel-header">
        ìµœì¢… ê²°ê³¼ (ì£¼ì„ í¬í•¨)
        <button class="btn btn-success btn-sm" onclick="copyResult()" style="padding: 5px 10px; font-size: 12px;">
          ğŸ“‹ ë³µì‚¬
        </button>
      </div>
      <div class="result-content" id="resultContent">
        ë³€í™˜ í›„ ì£¼ì„ì´ ì¶”ê°€ëœ ìµœì¢… ì½”ë“œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
        
      </div>
    </div>

    <!-- ì‚¬ìš© ì˜ˆì‹œ ì„¹ì…˜ -->
    <div class="usage-examples" style="margin-top: 40px;">
      <div class="panel-header" style="background: #f8f9fa; padding: 20px; border-radius: 8px 8px 0 0; border-bottom: 1px solid #e9ecef;">
        <h3 style="margin: 0; color: #495057;">ğŸ“– ì‚¬ìš© ì˜ˆì‹œ</h3>
      </div>
      
      <div style="background: white; border-radius: 0 0 8px 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); padding: 30px;">
        <!-- ì˜ˆì‹œ 1: ì„ íƒì  ë³€ê²½ -->
        <div class="example-section" style="margin-bottom: 40px;">
          <h3 style="color: #007bff; margin-bottom: 15px;">ğŸ¯ ì„ íƒì  ë³€ê²½ ì˜ˆì‹œ</h3>
          <p style="color: #666; margin-bottom: 20px;">23ë²ˆê³¼ 25ë²ˆ ì´ë¯¸ì§€ë§Œ ë‚ ì§œë¥¼ 250617ì—ì„œ 250701ë¡œ ë³€ê²½í•˜ëŠ” ê²½ìš°</p>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <div>
              <h4 style="color: #dc3545; margin-bottom: 10px;">âŒ ë³€ê²½ ì „</h4>
              <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; font-family: monospace; font-size: 13px; border-left: 3px solid #dc3545;">
<span style="color: #666;">&lt;div class="product_detail_wrap"&gt;</span>
  &lt;img src="/img/detail/P000000L/<span style="background: #ffebee; color: #c62828;">250617</span>/22.jpg"&gt;
  &lt;img src="/img/detail/P000000L/<span style="background: #ffebee; color: #c62828;">250617</span>/23.jpg"&gt;
  &lt;img src="/img/detail/P000000L/<span style="background: #ffebee; color: #c62828;">250617</span>/24.jpg"&gt;
  &lt;img src="/img/detail/P000000L/<span style="background: #ffebee; color: #c62828;">250617</span>/25.jpg"&gt;
<span style="color: #666;">&lt;/div&gt;</span>
              </div>
            </div>
            
            <div>
              <h4 style="color: #28a745; margin-bottom: 10px;">âœ… ë³€ê²½ í›„</h4>
              <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; font-family: monospace; font-size: 13px; border-left: 3px solid #28a745;">
<span style="color: #666;">&lt;div class="product_detail_wrap"&gt;</span>
  &lt;img src="/img/detail/P000000L/250617/22.jpg"&gt;
  &lt;img src="/img/detail/P000000L/<span style="background: #e8f5e8; color: #2e7d32;">250701</span>/23.jpg"&gt; <span style="color: #ff9800;">/* 250701 - íŠ¹ì • ì´ë¯¸ì§€ë§Œ ë‚ ì§œ ë³€ê²½ */</span>
  &lt;img src="/img/detail/P000000L/250617/24.jpg"&gt;
  &lt;img src="/img/detail/P000000L/<span style="background: #e8f5e8; color: #2e7d32;">250701</span>/25.jpg"&gt; <span style="color: #ff9800;">/* 250701 - íŠ¹ì • ì´ë¯¸ì§€ë§Œ ë‚ ì§œ ë³€ê²½ */</span>
<span style="color: #666;">&lt;/div&gt;</span>
              </div>
            </div>
          </div>
          
          <div style="background: #e3f2fd; padding: 15px; border-radius: 6px; border-left: 4px solid #1976d2;">
            <h4 style="margin: 0 0 15px 0; color: #1976d2;">âš™ï¸ ì„¤ì •ê°’</h4>
            <div style="font-family: monospace; font-size: 13px; color: #333;">
              <div><strong>ì°¾ì„ í…ìŠ¤íŠ¸:</strong> <code>/250617\/(23|25)\.(jpg|png)/g</code></div>
              <div><strong>ë°”ê¿€ í…ìŠ¤íŠ¸:</strong> <code>250701/$1.$2</code></div>
              <div><strong>ì£¼ì„ ë‚´ìš©:</strong> <code>íŠ¹ì • ì´ë¯¸ì§€ë§Œ ë‚ ì§œ ë³€ê²½</code></div>
            </div>
          </div>
        </div>

        <!-- ì‚¬ìš© íŒ -->
        <div class="usage-tips" style="background: #fff3e0; padding: 20px; border-radius: 8px; border-left: 4px solid #ff9800;">
          <h4 style="color: #f57c00; margin: 0 0 15px 0;">ğŸ’¡ ì‚¬ìš© íŒ</h4>
          <ul style="margin: 0; padding-left: 20px; color: #333;">
            <li style="margin-bottom: 8px;"><strong>ì •ê·œì‹ í™œìš©:</strong> ë³µì¡í•œ íŒ¨í„´ì€ ì •ê·œì‹ìœ¼ë¡œ ì²˜ë¦¬ (ì˜ˆ: <code>/old\d+/g</code>)</li>
            <li style="margin-bottom: 8px;"><strong>ë°±ì—… í•„ìˆ˜:</strong> ëŒ€ëŸ‰ ë³€ê²½ ì „ì—ëŠ” ë°˜ë“œì‹œ ì›ë³¸ ì½”ë“œë¥¼ ë°±ì—…í•˜ì„¸ìš”</li>
            <li style="margin-bottom: 8px;"><strong>ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸:</strong> ì‘ì€ ë¶€ë¶„ë¶€í„° í…ŒìŠ¤íŠ¸ í›„ ì „ì²´ ì ìš©</li>
            <li style="margin-bottom: 8px;"><strong>ì£¼ì„ í™œìš©:</strong> ë³€ê²½ ë‚´ìš©ì„ ëª…í™•íˆ ê¸°ë¡í•´ ì¶”í›„ ì¶”ì  ê°€ëŠ¥</li>
            <li><strong>ë¯¸ë¦¬ë³´ê¸° í™•ì¸:</strong> ë³€í™˜ ê²°ê³¼ë¥¼ ë°˜ë“œì‹œ í™•ì¸ í›„ ë³µì‚¬</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- í”Œë¡œíŒ… ë¹„ë©”ì˜¤ ë²„íŠ¼ -->
  <button class="floating-vimeo-btn" onclick="document.getElementById('vimeoGeneratorModal').open()" title="ë¹„ë©”ì˜¤ ì½”ë“œ ìƒì„±ê¸°">
    <span>ë¹„ë©”ì˜¤ ì½”ë“œ ìƒì„±ê¸°</span>
  </button>

  <!-- ë¹„ë©”ì˜¤ ì½”ë“œ ìƒì„±ê¸° ëª¨ë‹¬ -->
  <site-modal id="vimeoGeneratorModal">
    <div class="modal-header">
      <h3>ğŸ¬ ë¹„ë©”ì˜¤ ì½”ë“œ ìƒì„±ê¸°</h3>
      <button class="usage-guide-close" onclick="document.getElementById('vimeoGeneratorModal').close()" aria-label="ë‹«ê¸°">&times;</button>
    </div>
    <div class="modal-body">
      <!-- ì‚¬ìš©ë²• ê°€ì´ë“œ -->
      <div class="vimeo-guide" style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 24px; border-left: 4px solid #007bff;">
        <h4 style="margin: 0 0 10px 0; color: #007bff; font-size: 16px;">ğŸ“‹ ë¹„ë©”ì˜¤ ë‹¤ì´ë ‰íŠ¸ ë§í¬ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•</h4>
        <div class="guide-steps" style="font-size: 14px; line-height: 1.6; display: none;">
          <p style="margin: 8px 0;"><strong>1.</strong> ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ë™ì˜ìƒì„ ì—½ë‹ˆë‹¤</p>
          <p style="margin: 8px 0;"><strong>2.</strong> ë™ì˜ìƒ ì„¤ì • í˜ì´ì§€ì˜ ì˜¤ë¥¸ìª½ ìƒë‹¨ ëª¨ì„œë¦¬ì— ìˆëŠ” <strong>ì˜µì…˜ ë©”ë‰´ (â€¦)</strong>ë¥¼ ì„ íƒí•©ë‹ˆë‹¤</p>
          <p style="margin: 8px 0;"><strong>3.</strong> <strong>Video file links</strong>ë¥¼ ì„ íƒí•©ë‹ˆë‹¤</p>
          <p style="margin: 8px 0;"><strong>4.</strong> ëª¨ë‹¬ ì°½ì˜ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ì—ì„œ <strong>Play The Video</strong>ë¥¼ ì„ íƒí•©ë‹ˆë‹¤</p>
          <p style="margin: 8px 0;"><strong>5.</strong> ê°€ì ¸ì˜¤ë ¤ëŠ” í™”ì§ˆì˜ <strong>Copy Link</strong>ë¥¼ ì„ íƒí•©ë‹ˆë‹¤</p>
          <p style="margin: 8px 0;"><strong>6.</strong> ë³µì‚¬ëœ ë§í¬ë¥¼ ì•„ë˜ ì…ë ¥ì°½ì— ë¶™ì—¬ë„£ê¸°í•˜ê³  ì½”ë“œë¥¼ ìƒì„±í•˜ì„¸ìš”</p>
        </div>
        <button onclick="toggleVimeoGuide()" style="background: none; border: none; color: #007bff; cursor: pointer; font-size: 12px; margin-top: 5px; text-decoration: underline;">
          ê°€ì´ë“œ í¼ì¹˜ê¸°
        </button>
      </div>
      
      <div class="vimeo-generator">
        <label for="vimeoUrl">ë¹„ë©”ì˜¤ ë§í¬ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”:</label>
        <input type="url" id="vimeoUrl" placeholder="https://player.vimeo.com/progressive_redirect/playback/..." autocomplete="off" style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;">
        
        <div class="vimeo-options">
          <label style="display: flex; align-items: center; margin: 10px 0;">
            <input type="checkbox" id="vimeoMuted" checked style="margin-right: 8px;">
            ìŒì†Œê±° (muted)
          </label>
          <label style="display: flex; align-items: center; margin: 10px 0;">
            <input type="checkbox" id="vimeoAutoplay" checked style="margin-right: 8px;">
            ìë™ì¬ìƒ (autoplay)
          </label>
          <label style="display: flex; align-items: center; margin: 10px 0;">
            <input type="checkbox" id="vimeoLoop" checked style="margin-right: 8px;">
            ë°˜ë³µì¬ìƒ (loop)
          </label>
          <label style="display: flex; align-items: center; margin: 10px 0;">
            <input type="checkbox" id="vimeoPlaysinline" checked style="margin-right: 8px;">
            ì¸ë¼ì¸ ì¬ìƒ (playsinline)
          </label>
        </div>
        
        <button onclick="generateVimeoCode()" style="width: 100%; padding: 12px; background: #007bff; color: white; border: none; border-radius: 4px; margin: 10px 0; cursor: pointer;">
          HTML ì½”ë“œ ìƒì„±
        </button>
        
        <div class="generated-code" style="display: none;">
          <label>ìƒì„±ëœ HTML ì½”ë“œ:</label>
          <textarea id="generatedCode" readonly style="width: 100%; height: 120px; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; font-size: 14px; background: #f8f9fa; box-sizing: border-box;"></textarea>
          <button onclick="copyGeneratedCode()" style="width: 100%; padding: 10px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">
            ğŸ“‹ ì½”ë“œ ë³µì‚¬
          </button>
        </div>
      </div>
    </div>
  </site-modal>

  <script>
    // í”„ë¦¬ì…‹ ì„¤ì •
    function setPreset(type) {
      const findInput = document.getElementById('findText');
      const replaceInput = document.getElementById('replaceText');
      const commentInput = document.getElementById('commentText');
      
      const presets = {
        selective: {
          find: '/250617\\/(23|25)\\.(jpg|png)/g',
          replace: '250701/$1.$2',
          comment: 'íŠ¹ì • ì´ë¯¸ì§€ë§Œ ë‚ ì§œ ë³€ê²½'
        },
        date: {
          find: '250617',
          replace: '250701',
          comment: 'ì´ë¯¸ì§€ ë‚ ì§œ ì—…ë°ì´íŠ¸'
        },
        image: {
          find: '/images/',
          replace: '/assets/images/',
          comment: 'ì´ë¯¸ì§€ ê²½ë¡œ ì—…ë°ì´íŠ¸'
        }
      };
      
      if (presets[type]) {
        findInput.value = presets[type].find;
        replaceInput.value = presets[type].replace;
        commentInput.value = presets[type].comment;
      }
    }

    // ì½”ë“œ ë³€í™˜ í•¨ìˆ˜
    function transformCode() {
      const originalCode = document.getElementById('originalCode').value;
      const findText = document.getElementById('findText').value;
      const replaceText = document.getElementById('replaceText').value;
      const commentText = document.getElementById('commentText').value;
      
      if (!originalCode.trim()) {
        alert('ê¸°ì¡´ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      if (!findText.trim()) {
        alert('ì°¾ì„ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      // ì •ê·œì‹ ì²˜ë¦¬
      let regex;
      try {
        if (findText.startsWith('/') && findText.lastIndexOf('/') > 0) {
          const flags = findText.substring(findText.lastIndexOf('/') + 1);
          const pattern = findText.substring(1, findText.lastIndexOf('/'));
          regex = new RegExp(pattern, flags || 'g');
        } else {
          regex = new RegExp(findText.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
        }
      } catch (e) {
        alert('ì •ê·œì‹ íŒ¨í„´ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
        return;
      }
      
      // ì½”ë“œ ë³€í™˜
      const newCode = originalCode.replace(regex, replaceText);
      document.getElementById('newCode').value = newCode;
      
      // ì°¨ì´ì  í‘œì‹œ
      showDiff(originalCode, newCode);
      
      // ì£¼ì„ ì¶”ê°€ëœ ìµœì¢… ê²°ê³¼ ìƒì„±
      generateFinalResult(originalCode, newCode, findText, replaceText, commentText);
      
      // ë³µì‚¬ ë²„íŠ¼ í‘œì‹œ
      document.getElementById('copyBtn').style.display = 'inline-flex';
    }

    // ì°¨ì´ì  í‘œì‹œ í•¨ìˆ˜
    function showDiff(original, modified) {
      const originalLines = original.split('\n');
      const modifiedLines = modified.split('\n');
      const diffContent = document.getElementById('diffContent');
      const diffStats = document.getElementById('diffStats');
      
      let html = '';
      let addedCount = 0;
      let removedCount = 0;
      
      const maxLines = Math.max(originalLines.length, modifiedLines.length);
      
      for (let i = 0; i < maxLines; i++) {
        const originalLine = originalLines[i] || '';
        const modifiedLine = modifiedLines[i] || '';
        
        if (originalLine === modifiedLine) {
          if (originalLine.trim()) {
            html += `<div class="diff-line diff-unchanged">${escapeHtml(originalLine)}</div>`;
          }
        } else {
          if (originalLine && originalLines[i] !== undefined) {
            html += `<div class="diff-line diff-removed">- ${escapeHtml(originalLine)}</div>`;
            removedCount++;
          }
          if (modifiedLine && modifiedLines[i] !== undefined) {
            html += `<div class="diff-line diff-added">+ ${escapeHtml(modifiedLine)}</div>`;
            addedCount++;
          }
        }
      }
      
      diffContent.innerHTML = html || 'ë³€ê²½ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.';
      
      // í†µê³„ ì—…ë°ì´íŠ¸
      document.getElementById('addedLines').textContent = addedCount;
      document.getElementById('removedLines').textContent = removedCount;
      diffStats.style.display = addedCount > 0 || removedCount > 0 ? 'flex' : 'none';
    }

    // ìµœì¢… ê²°ê³¼ ìƒì„± (ì£¼ì„ í¬í•¨)
    function generateFinalResult(original, modified, findText, replaceText, commentText) {
      const today = '250701'; // ì˜¤ëŠ˜ ë‚ ì§œ
      const lines = modified.split('\n');
      const originalLines = original.split('\n');
      let result = '';
      
      for (let i = 0; i < lines.length; i++) {
        const line = lines[i];
        const originalLine = originalLines[i] || '';
        
        // ë³€ê²½ëœ ë¼ì¸ì¸ì§€ í™•ì¸
        if (line !== originalLine && line.includes(replaceText)) {
          const comment = commentText ? 
            ` /* ${today} - ${commentText} */` : 
            ` /* ${today} - ${findText} â†’ ${replaceText} */`;
          
          // HTML íƒœê·¸ì¸ì§€ í™•ì¸
          if (line.trim().startsWith('<') && line.trim().endsWith('>')) {
            // HTML íƒœê·¸ì˜ ê²½ìš° <!-- --> ì£¼ì„ ì‚¬ìš©
            result += line + `\n<!-- ${today} - ${commentText || findText + ' â†’ ' + replaceText} -->\n`;
          } else {
            // ì¼ë°˜ ì½”ë“œì˜ ê²½ìš° /* */ ì£¼ì„ ì‚¬ìš©
            result += line + comment + '\n';
          }
        } else {
          result += line + '\n';
        }
      }
      
      const resultContent = document.getElementById('resultContent');
      resultContent.innerHTML = `<div class="comment-highlight">${escapeHtml(result)}</div>`;
    }

    // HTML ì´ìŠ¤ì¼€ì´í”„ í•¨ìˆ˜
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // ê²°ê³¼ ë³µì‚¬ í•¨ìˆ˜
    function copyResult() {
      const resultContent = document.getElementById('resultContent').textContent;
      
      if (!resultContent.trim()) {
        alert('ë³µì‚¬í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }
      
      navigator.clipboard.writeText(resultContent).then(() => {
        const copyBtn = document.getElementById('copyBtn');
        const originalText = copyBtn.innerHTML;
        copyBtn.innerHTML = 'âœ… ë³µì‚¬ë¨!';
        copyBtn.style.background = '#28a745';
        
        setTimeout(() => {
          copyBtn.innerHTML = originalText;
          copyBtn.style.background = '#28a745';
        }, 2000);
      }).catch(() => {
        // í´ë¦½ë³´ë“œ APIê°€ ì§€ì›ë˜ì§€ ì•ŠëŠ” ê²½ìš°
        const textArea = document.createElement('textarea');
        textArea.value = resultContent;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        
        alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
      });
    }

    // ì „ì²´ ì´ˆê¸°í™” í•¨ìˆ˜
    function clearAll() {
      if (confirm('ëª¨ë“  ë‚´ìš©ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        document.getElementById('originalCode').value = '';
        document.getElementById('newCode').value = '';
        document.getElementById('findText').value = '';
        document.getElementById('replaceText').value = '';
        document.getElementById('commentText').value = '';
        document.getElementById('diffContent').innerHTML = 'ì—¬ê¸°ì—ì„œ ë³€ê²½ì ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
        document.getElementById('resultContent').innerHTML = 'ë³€í™˜ í›„ ì£¼ì„ì´ ì¶”ê°€ëœ ìµœì¢… ì½”ë“œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.';
        document.getElementById('diffStats').style.display = 'none';
        document.getElementById('copyBtn').style.display = 'none';
      }
    }

    // ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° (ì˜µì…˜)
    document.getElementById('originalCode').addEventListener('input', function() {
      const findText = document.getElementById('findText').value;
      const replaceText = document.getElementById('replaceText').value;
      
      if (this.value && findText && replaceText) {
        // ìë™ ë³€í™˜ì€ ì‚¬ìš©ìê°€ ì›í•  ë•Œë§Œ í™œì„±í™”
        // transformCode();
      }
    });

    // ë°”ê¿€ í…ìŠ¤íŠ¸ ìë™ ì™„ì„± ê¸°ëŠ¥
    document.getElementById('replaceText').addEventListener('input', function() {
      const findText = document.getElementById('findText').value;
      const replaceText = this.value;
      
      // ì°¾ì„ í…ìŠ¤íŠ¸ê°€ ì •ê·œì‹ íŒ¨í„´ì´ê³ , ë°”ê¿€ í…ìŠ¤íŠ¸ê°€ ê°„ë‹¨í•œ í˜•íƒœì¼ ë•Œ ìë™ ì™„ì„±
      if (findText.includes('/(') && findText.includes('|') && findText.includes(')\\.(') && replaceText && !replaceText.includes('$')) {
        // í˜„ì¬ ì»¤ì„œ ìœ„ì¹˜ ì €ì¥
        const cursorPos = this.selectionStart;
        const originalLength = replaceText.length;
        
        // $1.$2ê°€ ì—†ê³  ë‹¨ìˆœí•œ í…ìŠ¤íŠ¸ë§Œ ìˆëŠ” ê²½ìš°
        if (!replaceText.includes('$1') && !replaceText.includes('$2')) {
          const newValue = replaceText + '/$1.$2';
          this.value = newValue;
          
          // ì»¤ì„œë¥¼ ì¶”ê°€ëœ í…ìŠ¤íŠ¸ ì•ì— ìœ„ì¹˜ì‹œí‚´ (ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë¶€ë¶„ ë)
          this.setSelectionRange(originalLength, originalLength);
        }
      }
    });

        // ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥
    function previewCode() {
      const originalCode = document.getElementById('originalCode').value;
      const newCode = document.getElementById('newCode').value || originalCode;
      if (!originalCode.trim()) {
        alert('ê¸°ì¡´ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      // URL ì…ë ¥í•„ë“œì—ì„œ ë² ì´ìŠ¤ ê²½ë¡œ ì¶”ì¶œ
      const pageUrl = document.getElementById('pageUrl').value.trim();
      let basePath = '';
      if (pageUrl && pageUrl.startsWith('http')) {
        try {
          basePath = new URL(pageUrl).origin;
        } catch (e) {
          console.log('URL íŒŒì‹± ì‹¤íŒ¨:', e);
        }
      }
      
      // ì´ë¯¸ì§€ ê²½ë¡œë¥¼ ì ˆëŒ€ê²½ë¡œë¡œ ë³€í™˜
      let previewCode = newCode;
      if (basePath) {
        // src="ìƒëŒ€ê²½ë¡œ"ë¥¼ src="ì ˆëŒ€ê²½ë¡œ"ë¡œ ë³€í™˜
        previewCode = previewCode.replace(/src="(?!https?:\/\/|\/\/|data:)([^"]+)"/g, function(match, relativePath) {
          // ìƒëŒ€ê²½ë¡œê°€ /ë¡œ ì‹œì‘í•˜ë©´ basePath ë’¤ì— ë°”ë¡œ ë¶™ì´ê³ , ì•„ë‹ˆë©´ /ë¥¼ ì¶”ê°€
          if (relativePath.startsWith('/')) {
            return 'src="' + basePath + relativePath + '"';
          } else {
            return 'src="' + basePath + '/' + relativePath + '"';
          }
        });
      }
      
      // position: absoluteë¥¼ position: staticìœ¼ë¡œ ë³€ê²½í•˜ê³  ê´€ë ¨ ì†ì„± ì •ë¦¬
      previewCode = previewCode.replace(/position:\s*absolute/g, 'position: static');
      previewCode = previewCode.replace(/position:\s*fixed/g, 'position: static');
      
      // absolute/fixed í¬ì§€ì…”ë‹ê³¼ í•¨ê»˜ ì‚¬ìš©ë˜ë˜ ë¶ˆí•„ìš”í•œ ì†ì„±ë“¤ ì œê±°
      // ì†ì„± ë’¤ì— ì„¸ë¯¸ì½œë¡ ì´ ìˆëŠ” ê²½ìš°
      previewCode = previewCode.replace(/;\s*top:\s*[^;]+/g, '');
      previewCode = previewCode.replace(/;\s*left:\s*[^;]+/g, '');
      previewCode = previewCode.replace(/;\s*right:\s*[^;]+/g, '');
      previewCode = previewCode.replace(/;\s*bottom:\s*[^;]+/g, '');
      previewCode = previewCode.replace(/;\s*z-index:\s*[^;]+/g, '');
      
      // ì†ì„±ì´ ë§¨ ì•ì— ì˜¤ëŠ” ê²½ìš° (top: 10px; ê°™ì€ í˜•íƒœ)
      previewCode = previewCode.replace(/top:\s*[^;]+;\s*/g, '');
      previewCode = previewCode.replace(/left:\s*[^;]+;\s*/g, '');
      previewCode = previewCode.replace(/right:\s*[^;]+;\s*/g, '');
      previewCode = previewCode.replace(/bottom:\s*[^;]+;\s*/g, '');
      previewCode = previewCode.replace(/z-index:\s*[^;]+;\s*/g, '');
      
      // ìƒˆ ì°½ìœ¼ë¡œ ë¯¸ë¦¬ë³´ê¸° ì—´ê¸°
      const previewWindow = window.open('about:blank', '_blank', 'width=1200,height=800,scrollbars=yes');
      
                      setTimeout(() => {
        previewWindow.document.body.innerHTML = 
          '<div style="padding: 20px; font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', sans-serif;">' +
          '<h2 style="color: #007bff; margin-bottom: 20px;">ğŸ–¥ï¸ í˜ì´ì§€ ë¯¸ë¦¬ë³´ê¸°</h2>' +
          '<div id="mediaStats" style="background: #f8f9fa; padding: 15px; margin-bottom: 20px; border-radius: 8px; border-left: 4px solid #007bff; text-align: center;">ë¯¸ë””ì–´ íŒŒì¼ì„ í™•ì¸í•˜ëŠ” ì¤‘...</div>' +
          '<div id="previewContent" style="border: 1px solid #ddd; padding: 20px; margin-bottom: 30px; border-radius: 8px; background: white;">' +
          previewCode +
          '</div>' +
          '</div>' +
          '<style>' +
          '#previewContent { max-width: 100%; overflow-x: auto; line-height: 0; }' +
          '#previewContent img, #previewContent video { max-width: 300px; height: auto; }' +
          '#previewContent > * { line-height: normal; }' +
          '#previewContent .product_detail_wrap, #previewContent .product_gallery { display: flex; flex-wrap: wrap; gap: 10px; justify-content: space-between; align-items: flex-start; }' +
          '</style>';
        
                setTimeout(() => {
          // DOM ìˆœì„œëŒ€ë¡œ ì´ë¯¸ì§€ì™€ ì˜ìƒì„ í•¨ê»˜ ìˆ˜ì§‘
          const allMediaElements = previewWindow.document.querySelectorAll('img, video');
          const allMedia = [];
          
          // DOM ìˆœì„œëŒ€ë¡œ ë¯¸ë””ì–´ ìš”ì†Œë“¤ ìˆ˜ì§‘
          allMediaElements.forEach((element) => {
            if (element.tagName === 'IMG') {
              allMedia.push({ element: element, type: 'image' });
            } else if (element.tagName === 'VIDEO') {
              allMedia.push({ element: element, type: 'video' });
            }
          });
          
          const images = allMedia.filter(media => media.type === 'image');
          const videos = allMedia.filter(media => media.type === 'video');
          
          // í†µí•© ìˆœë²ˆìœ¼ë¡œ ì²˜ë¦¬
          allMedia.forEach((media, index) => {
            const element = media.element;
            const src = element.getAttribute('src') || '';
            const filename = src.split('/').pop() || src.split('?')[0].split('/').pop() || '';
            const isAbsolute = src.startsWith('http') || src.startsWith('//');
            const isVideo = media.type === 'video';
            
            // wrapper ìƒì„±
            const wrapper = previewWindow.document.createElement('div');
            wrapper.style.cssText = `
              position: relative;
              display: inline-block;
              margin: 10px;
              border: 3px solid ${isVideo ? '#dc3545' : '#007bff'};
              border-radius: 8px;
              overflow: hidden;
              box-shadow: 0 4px 12px rgba(${isVideo ? '220,53,69' : '0,123,255'},0.15);
              max-width: 300px;
              vertical-align: top;
            `;
            
            // ìš”ì†Œ ìŠ¤íƒ€ì¼ ì„¤ì •
            element.style.cssText = `
              display: block;
              max-width: 100%;
              height: auto;
            `;
            
            // íŒŒì¼ëª… ë±ƒì§€ ìƒì„± (ì˜¤ë¥¸ìª½)
            const badge = previewWindow.document.createElement('div');
            badge.style.cssText = `
              position: absolute;
              top: 8px;
              right: 8px;
              background: ${isAbsolute ? '#28a745' : '#ffc107'};
              color: ${isAbsolute ? 'white' : 'black'};
              padding: 4px 8px;
              border-radius: 4px;
              font-size: 16px;
              font-weight: bold;
              font-family: monospace;
              box-shadow: 0 2px 4px rgba(0,0,0,0.2);
              z-index: 10;
            `;
            badge.textContent = filename || (isVideo ? 'video' : 'image');
            
            // ìˆœë²ˆ ë±ƒì§€ ìƒì„± (ì™¼ìª½, í†µí•© ìˆœë²ˆ)
            const numberBadge = previewWindow.document.createElement('div');
            numberBadge.style.cssText = `
              position: absolute;
              top: 8px;
              left: 8px;
              background: ${isVideo ? '#dc3545' : '#007bff'};
              color: white;
              width: 32px;
              height: 32px;
              border-radius: 50%;
              font-size: 18px;
              font-weight: bold;
              display: flex;
              align-items: center;
              justify-content: center;
              box-shadow: 0 2px 4px rgba(0,0,0,0.2);
              z-index: 10;
            `;
            numberBadge.textContent = index + 1;
            
            // DOM êµ¬ì¡° ë³€ê²½
            element.parentNode.insertBefore(wrapper, element);
            wrapper.appendChild(element);
            wrapper.appendChild(badge);
            wrapper.appendChild(numberBadge);
          });
          
          // ê°„ëµí•œ í†µê³„ í‘œì‹œ (ìƒë‹¨)
          const mediaStats = previewWindow.document.getElementById('mediaStats');
          const totalCount = images.length + videos.length;
          
          if (totalCount > 0) {
            let statsText = `ğŸ“Š ë¯¸ë””ì–´ íŒŒì¼: ì´ <strong>${totalCount}ê°œ</strong>`;
            
            if (images.length > 0 && videos.length > 0) {
              statsText += ` (ì´ë¯¸ì§€ ${images.length}ê°œ, ì˜ìƒ ${videos.length}ê°œ)`;
            } else if (images.length > 0) {
              statsText += ` (ì´ë¯¸ì§€ ${images.length}ê°œ)`;
            } else if (videos.length > 0) {
              statsText += ` (ì˜ìƒ ${videos.length}ê°œ)`;
            }
            
            statsText += '<br><small style="color: #666; font-size: 12px;">ğŸ”µ ì´ë¯¸ì§€ëŠ” íŒŒë€ìƒ‰ í…Œë‘ë¦¬, ğŸ”´ ì˜ìƒì€ ë¹¨ê°„ìƒ‰ í…Œë‘ë¦¬ë¡œ í‘œì‹œë©ë‹ˆë‹¤</small>';
            
            mediaStats.innerHTML = statsText;
            mediaStats.style.color = '#007bff';
          } else {
            mediaStats.innerHTML = 'ğŸ“Š ë¯¸ë””ì–´ íŒŒì¼ì´ ë°œê²¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤';
            mediaStats.style.color = '#666';
          }
        }, 100);
      }, 100);
    }



    // í˜ì´ì§€ ë‚´ìš© ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜ (í”„ë¡ì‹œ ì‚¬ìš©)
    async function fetchPageContent() {
      const urlInput = document.getElementById('pageUrl');
      const originalCodeTextarea = document.getElementById('originalCode');
      const url = urlInput.value.trim();
      
      if (!url) {
        alert('URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      if (!url.startsWith('http')) {
        alert('ì˜¬ë°”ë¥¸ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”. (http:// ë˜ëŠ” https://ë¡œ ì‹œì‘)');
        return;
      }
      

      
      // ë¡œë”© í‘œì‹œ
      const button = event.target;
      const originalText = button.innerHTML;
      button.innerHTML = 'â³ ê°€ì ¸ì˜¤ëŠ” ì¤‘...';
      button.disabled = true;
      
      try {
        let htmlContent;
        let success = false;
        
        // ì—¬ëŸ¬ í”„ë¡ì‹œ ì„œë¹„ìŠ¤ ì‹œë„
        const proxyServices = [
          {
            name: 'AllOrigins',
            url: `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`,
            parse: (data) => data.contents
          },
          {
            name: 'CodeTabs',
            url: `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url)}`,
            parse: (data) => data
          },
          {
            name: 'ThingProxy',
            url: `https://thingproxy.freeboard.io/fetch/${url}`,
            parse: (data) => data
          }
        ];
        
        for (let i = 0; i < proxyServices.length; i++) {
          const proxy = proxyServices[i];
          try {
            button.innerHTML = `â³ ${proxy.name} ì‹œë„ ì¤‘... (${i + 1}/${proxyServices.length})`;
            
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 15000); // 15ì´ˆ íƒ€ì„ì•„ì›ƒ
            
            const response = await fetch(proxy.url, {
              method: 'GET',
              headers: {
                'Accept': 'application/json, text/plain, */*',
                'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36'
              },
              signal: controller.signal
            });
            
            clearTimeout(timeoutId);
            
            if (!response.ok) {
              throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            const data = proxy.name === 'AllOrigins' ? await response.json() : await response.text();
            htmlContent = proxy.parse(data);
            
            if (htmlContent && htmlContent.length > 100) {
              success = true;
              console.log(`âœ… ${proxy.name} ì„±ê³µ!`);
              break;
            } else {
              throw new Error('ì‘ë‹µ ë°ì´í„°ê°€ ë„ˆë¬´ ì‘ìŒ');
            }
          } catch (proxyError) {
            console.log(`âŒ ${proxy.name} ì‹¤íŒ¨:`, proxyError.message);
            
            // ë§ˆì§€ë§‰ ì„œë¹„ìŠ¤ê°€ ì•„ë‹ˆë©´ ì ì‹œ ëŒ€ê¸°
            if (i < proxyServices.length - 1) {
              button.innerHTML = `â³ ë‹¤ìŒ ì„œë¹„ìŠ¤ ì‹œë„ ì¤‘... (${i + 2}/${proxyServices.length})`;
              await new Promise(resolve => setTimeout(resolve, 1000));
            }
            continue;
          }
        }
        
        if (!success) {
          throw new Error(`ëª¨ë“  í”„ë¡ì‹œ ì„œë¹„ìŠ¤ ì‹¤íŒ¨

ğŸš« ì‹¤íŒ¨í•œ ì„œë¹„ìŠ¤ë“¤:
${proxyServices.map(p => `â€¢ ${p.name}`).join('\n')}

ğŸ’¡ í•´ê²° ë°©ë²•:
1. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„
2. ì¸í„°ë„· ì—°ê²° í™•ì¸  
3. VPN ì‚¬ìš© ì¤‘ì´ë©´ í•´ì œ
4. ìˆ˜ë™ ë³µì‚¬ ë°©ë²• ì‚¬ìš©`);
        }
        
        // HTML íŒŒì‹±í•˜ì—¬ product_detail_wrap ì°¾ê¸°
        const parser = new DOMParser();
        const doc = parser.parseFromString(htmlContent, 'text/html');
        
                 // product_detail_wrap í´ë˜ìŠ¤ ì°¾ê¸°
         let targetContent = '';
         const productDetailWrap = doc.querySelector('.product_detail_wrap');
         
         if (productDetailWrap) {
           targetContent = productDetailWrap.innerHTML;
         } else {
           // 95problems.com ì „ìš© ì„ íƒìë“¤
           const domain = new URL(url).hostname;
           let siteSpecificSelectors = [];
           
           if (domain.includes('95problems.com')) {
             siteSpecificSelectors = [
               '.product_detail_wrap', '.product-detail-imgview', '.xans-product-detail', 
               '.product-detail-area', '.detail-content', '.product_content'
             ];
           }
           
           // ì¼ë°˜ì ì¸ ìƒí’ˆ ìƒì„¸ ì˜ì—­ ì„ íƒìë“¤
           const generalSelectors = [
             '.product-detail', '.product_detail', '.product-detail-imgview', '.detail_wrap', 
             '.product-content', '.item-detail', '#product-detail',
             '.goods-detail', '.detail-area', '.product-info'
           ];
           
           // ì‚¬ì´íŠ¸ë³„ + ì¼ë°˜ ì„ íƒì í†µí•©
           const allSelectors = [...siteSpecificSelectors, ...generalSelectors];
           
           for (const selector of allSelectors) {
             const element = doc.querySelector(selector);
             if (element) {
               targetContent = element.innerHTML;
               break;
             }
           }
           
           // ì•„ë¬´ê²ƒë„ ëª» ì°¾ì•˜ìœ¼ë©´ bodyì—ì„œ ì´ë¯¸ì§€ë‚˜ ì˜ìƒì´ í¬í•¨ëœ í° ì„¹ì…˜ ì°¾ê¸°
           if (!targetContent) {
             const sections = doc.querySelectorAll('div, section, article');
             for (const section of sections) {
               const imgs = section.querySelectorAll('img');
               const videos = section.querySelectorAll('video');
               if ((imgs.length + videos.length) >= 3 && section.innerHTML.length > 1000) {
                 targetContent = section.innerHTML;
                 break;
               }
             }
           }
         }
        
        if (targetContent) {
          // ë ˆì´ì§€ë¡œë”© ì²˜ë¦¬ ì ìš©
          targetContent = processLazyLoading(targetContent);
          targetContent = removeUnnecessaryDataAttrs(targetContent);
          
          originalCodeTextarea.value = targetContent;
          
          // ì„±ê³µ ë©”ì‹œì§€
          button.innerHTML = 'âœ… ì™„ë£Œ!';
          setTimeout(() => {
            button.innerHTML = originalText;
            button.disabled = false;
          }, 2000);
          
        } else {
          // íŠ¹ì • ì„ íƒìë¥¼ ì°¾ì§€ ëª»í–ˆì„ ë•Œ ì „ì²´ body ë‚´ìš© ì‚¬ìš©
          const bodyElement = doc.querySelector('body');
          if (bodyElement && bodyElement.innerHTML.length > 100) {
            targetContent = bodyElement.innerHTML;
            
            // ë ˆì´ì§€ë¡œë”© ì²˜ë¦¬ ì ìš©
            targetContent = processLazyLoading(targetContent);
            targetContent = removeUnnecessaryDataAttrs(targetContent);
            
            originalCodeTextarea.value = targetContent;
            
            // ì„±ê³µ ë©”ì‹œì§€ (ì „ì²´ ë‚´ìš©ìœ¼ë¡œ ê°€ì ¸ì™”ìŒì„ í‘œì‹œ)
            button.innerHTML = 'âœ… ì „ì²´ ë‚´ìš©';
            setTimeout(() => {
              button.innerHTML = originalText;
              button.disabled = false;
            }, 2000);
            
            // ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´
            setTimeout(() => {
              alert('ğŸ” ìƒí’ˆ ìƒì„¸ ì˜ì—­ì„ ìë™ìœ¼ë¡œ ì°¾ì§€ ëª»í•´ ì „ì²´ í˜ì´ì§€ ë‚´ìš©ì„ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.\n\nğŸ’¡ íŒ: ë¶ˆí•„ìš”í•œ ë¶€ë¶„ì„ ì§ì ‘ ì‚­ì œí•˜ê³  í•„ìš”í•œ ë¶€ë¶„ë§Œ ë‚¨ê²¨ì£¼ì„¸ìš”.');
            }, 1000);
          } else {
            throw new Error('í˜ì´ì§€ ë‚´ìš©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
          }
        }
        
      } catch (error) {
        console.error('í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);
        
        // ì‹¤íŒ¨ ì‹œ ì•ˆë‚´
        button.innerHTML = 'âŒ ì‹¤íŒ¨';
        setTimeout(() => {
          button.innerHTML = originalText;
          button.disabled = false;
        }, 2000);
        
        // í”„ë¡ì‹œ ì‹¤íŒ¨ ì‹œ ìë™ìœ¼ë¡œ ìˆ˜ë™ ë³µì‚¬ ì•ˆë‚´
        const errorMsg = `ğŸš« ìë™ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨\n\n${error.message}\n\nğŸ“‹ ìˆ˜ë™ ë³µì‚¬ ë°©ë²•:\n1. í•´ë‹¹ í˜ì´ì§€ë¥¼ ìƒˆ íƒ­ì—ì„œ ì—´ê¸°\n2. F12(ê°œë°œìë„êµ¬) â†’ Elements íƒ­\n3. Ctrl+Fë¡œ ê²€ìƒ‰: "product_detail_wrap" ë˜ëŠ” "product-detail-imgview"\n4. í•´ë‹¹ ì˜ì—­ ìš°í´ë¦­ â†’ Copy â†’ Copy outerHTML\n5. ì—¬ê¸° ê¸°ì¡´ ì½”ë“œ ì˜ì—­ì— ë¶™ì—¬ë„£ê¸°\n\nğŸ’¡ ë¶™ì—¬ë„£ê¸° ì‹œ ë ˆì´ì§€ë¡œë”©ì´ ìë™ ì²˜ë¦¬ë©ë‹ˆë‹¤!`;
        
        const openPage = confirm(errorMsg + '\n\nì§€ê¸ˆ í•´ë‹¹ í˜ì´ì§€ë¥¼ ìƒˆ íƒ­ì—ì„œ ì—´ê¹Œìš”?');
        if (openPage) {
          window.open(url, '_blank');
          
          // í˜ì´ì§€ ì—´ê¸° í›„ ì¶”ê°€ ì•ˆë‚´
                     setTimeout(() => {
             alert('ğŸ“‹ ë³µì‚¬ íŒ:\n\n1. ê°œë°œìë„êµ¬ì—ì„œ ìƒí’ˆ ìƒì„¸ ì˜ì—­ ì°¾ê¸°\n   (product_detail_wrap, product-detail-imgview ë“±)\n2. í•´ë‹¹ ìš”ì†Œ ìš°í´ë¦­\n3. Copy â†’ Copy outerHTML\n4. ì—¬ê¸° ë¶™ì—¬ë„£ê¸°\n\nâœ… ë ˆì´ì§€ë¡œë”©ì´ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤!');
           }, 1000);
        }
      }
    }


    // ìƒëŒ€ê²½ë¡œë¥¼ ì ˆëŒ€ê²½ë¡œë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
    function makeAbsoluteUrl(url, baseUrl = null) {
      // ì´ë¯¸ ì ˆëŒ€ê²½ë¡œë©´ ê·¸ëŒ€ë¡œ ë°˜í™˜
      if (url.startsWith('http://') || url.startsWith('https://') || url.startsWith('//')) {
        return url;
      }
      
      // baseUrlì´ ì œê³µë˜ì§€ ì•Šì•˜ë‹¤ë©´ URL ì…ë ¥í•„ë“œì—ì„œ ì¶”ì¶œ ì‹œë„
      if (!baseUrl) {
        const pageUrl = document.getElementById('pageUrl').value.trim();
        if (pageUrl && pageUrl.startsWith('http')) {
          try {
            baseUrl = new URL(pageUrl).origin;
          } catch (e) {
            // URL íŒŒì‹± ì‹¤íŒ¨ì‹œ ê·¸ëŒ€ë¡œ ë°˜í™˜
            return url;
          }
        } else {
          return url; // ë² ì´ìŠ¤ URLì´ ì—†ìœ¼ë©´ ì›ë³¸ ë°˜í™˜
        }
      }
      
      // ë² ì´ìŠ¤ ê²½ë¡œ ë§ˆì§€ë§‰ ìŠ¬ë˜ì‹œ ì œê±°
      baseUrl = baseUrl.replace(/\/$/, '');
      
      // URLì´ /ë¡œ ì‹œì‘í•˜ë©´ ì ˆëŒ€ê²½ë¡œ, ì•„ë‹ˆë©´ ìƒëŒ€ê²½ë¡œ
      if (url.startsWith('/')) {
        return baseUrl + url;
      } else {
        return baseUrl + '/' + url;
      }
    }

    // ë ˆì´ì§€ë¡œë”© ìˆ˜ì • í•¨ìˆ˜
    function processLazyLoading(htmlContent) {
      // ê¸°ë³¸ì ìœ¼ë¡œ ë ˆì´ì§€ë¡œë”© ì²˜ë¦¬ë¥¼ í™œì„±í™” (ì²´í¬ë°•ìŠ¤ê°€ ì—†ìœ¼ë¯€ë¡œ)
      // if (!document.getElementById('fixLazyLoad').checked) {
      //   return htmlContent;
      // }
      
      let processedContent = htmlContent;
      
      // ec-data-src â†’ src ë³€í™˜ (ì ˆëŒ€ê²½ë¡œë¡œ)
      processedContent = processedContent.replace(/ec-data-src="([^"]*)"/g, (match, url) => {
        const absoluteUrl = makeAbsoluteUrl(url);
        return `src="${absoluteUrl}"`;
      });
      
      // data-src â†’ src ë³€í™˜ (ê¸°ì¡´ srcê°€ ì—†ê±°ë‚˜ placeholderì¸ ê²½ìš°)
      processedContent = processedContent.replace(/<img([^>]*?)data-src="([^"]*)"([^>]*?)(?:src="[^"]*")?([^>]*?)>/g, 
        (match, before, dataSrc, middle, after) => {
          // ê¸°ì¡´ srcê°€ ì˜ë¯¸ìˆëŠ” ê°’ì¸ì§€ í™•ì¸
          const existingSrcMatch = match.match(/src="([^"]*)"/);
          if (existingSrcMatch && existingSrcMatch[1] && 
              !existingSrcMatch[1].includes('placeholder') && 
              !existingSrcMatch[1].includes('loading') &&
              !existingSrcMatch[1].includes('lazy') &&
              existingSrcMatch[1].length > 10) {
            return match; // ì´ë¯¸ ìœ íš¨í•œ srcê°€ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ìœ ì§€
          }
          
          const absoluteUrl = makeAbsoluteUrl(dataSrc);
          return `<img${before}src="${absoluteUrl}"${middle}${after}>`;
        });
      
      // data-original â†’ src ë³€í™˜ (ì ˆëŒ€ê²½ë¡œë¡œ)
      processedContent = processedContent.replace(/<img([^>]*?)data-original="([^"]*)"([^>]*?)(?:src="[^"]*")?([^>]*?)>/g, 
        (match, before, dataOriginal, middle, after) => {
          const absoluteUrl = makeAbsoluteUrl(dataOriginal);
          return `<img${before}src="${absoluteUrl}"${middle}${after}>`;
        });
      
      // ë¹„ë””ì˜¤ íƒœê·¸ì˜ lazy-src â†’ src ë³€í™˜ (ì ˆëŒ€ê²½ë¡œë¡œ)
      processedContent = processedContent.replace(/lazy-src="([^"]*)"/g, (match, lazySrc) => {
        const absoluteUrl = makeAbsoluteUrl(lazySrc);
        return `src="${absoluteUrl}"`;
      });
      
      // ë¹„ë””ì˜¤ íƒœê·¸ì˜ data-src â†’ src ë³€í™˜ (ì´ë¯¸ srcê°€ ì—†ëŠ” ê²½ìš°ë§Œ)
      processedContent = processedContent.replace(/<video([^>]*?)data-src="([^"]*)"([^>]*?)>/g, 
        (match, before, dataSrc, after) => {
          // ì´ë¯¸ srcê°€ ìˆëŠ”ì§€ í™•ì¸
          if (match.includes('src="') && !match.includes('src=""')) {
            return match; // ì´ë¯¸ ìœ íš¨í•œ srcê°€ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ìœ ì§€
          }
          
          const absoluteUrl = makeAbsoluteUrl(dataSrc);
          return `<video${before}src="${absoluteUrl}"${after}>`;
        });
      
      return processedContent;
    }

    // ë¶ˆí•„ìš”í•œ data ì†ì„± ì œê±° í•¨ìˆ˜  
    function removeUnnecessaryDataAttrs(htmlContent) {
      // ê¸°ë³¸ì ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ì†ì„± ì œê±°ë¥¼ í™œì„±í™” (ì²´í¬ë°•ìŠ¤ê°€ ì—†ìœ¼ë¯€ë¡œ)
      // if (!document.getElementById('removeDataAttrs').checked) {
      //   return htmlContent;
      // }
      
      let processedContent = htmlContent;
      
      // ì²˜ë¦¬ëœ data ì†ì„±ë“¤ ì œê±°
      const attrsToRemove = [
        'ec-data-src', 'data-src', 'data-original', 'lazy-src',
        'data-lazy', 'data-loading', 'data-placeholder', 'data-srcset'
      ];
      
      attrsToRemove.forEach(attr => {
        const regex = new RegExp(`\\s${attr}="[^"]*"`, 'g');
        processedContent = processedContent.replace(regex, '');
      });
      
      return processedContent;
    }

    // í…ìŠ¤íŠ¸ ì˜ì—­ ë¶™ì—¬ë„£ê¸° ì´ë²¤íŠ¸ ì²˜ë¦¬
    document.getElementById('originalCode').addEventListener('paste', function(e) {
      setTimeout(() => {
        let content = this.value;
        
        // ë ˆì´ì§€ë¡œë”© ì²˜ë¦¬
        content = processLazyLoading(content);
        
        // ë¶ˆí•„ìš”í•œ ì†ì„± ì œê±°
        content = removeUnnecessaryDataAttrs(content);
        
        // ì²˜ë¦¬ëœ ë‚´ìš© ë‹¤ì‹œ ì„¤ì •
        if (content !== this.value) {
          this.value = content;
          console.log('âœ… ë ˆì´ì§€ë¡œë”© ë° ë°ì´í„° ì†ì„± ì²˜ë¦¬ ì™„ë£Œ');
        }
      }, 10);
    });

    // URL ì…ë ¥ í•„ë“œì—ì„œ ì—”í„°í‚¤ ì²˜ë¦¬
    document.getElementById('pageUrl').addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        fetchPageContent(); // í”„ë¡ì‹œ ì‹œë„, ì‹¤íŒ¨ ì‹œ ìë™ìœ¼ë¡œ ìˆ˜ë™ ë³µì‚¬ ì•ˆë‚´
      }
    });

  </script>

  <script src="assets/js/common.js" defer></script>
  <script src="assets/js/site-ui.js" defer></script>
</body>
</html> 