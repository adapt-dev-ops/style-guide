<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Code Prettier - ì½”ë“œ ë³€í™˜ ë„êµ¬</title>
  <meta name="description" content="ê¸°ì¡´ ì½”ë“œë¥¼ ìƒˆë¡œìš´ ì½”ë“œë¡œ ë³€í™˜í•˜ê³  ì°¨ì´ì ì„ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë„êµ¬">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link rel="icon" type="image/svg+xml" href="assets/images/favicon-orange.svg">
  <link rel="stylesheet" href="assets/css/common.css">
  <link rel="stylesheet" href="assets/css/site-ui.css">
  
  <style>
    /* iOS ìŠ¤íƒ€ì¼ ë¸”ëŸ¬ íš¨ê³¼ */
    .code-panel {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    }

    /* iOS ìŠ¤íƒ€ì¼ ì…ë ¥ í•„ë“œ */
    .glass-form-element {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    /* ì»¤ìŠ¤í…€ íˆ´íŒ ìŠ¤íƒ€ì¼ */
    [data-tooltip] {
      position: relative;
    }
    
    [data-tooltip]:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 120%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 6px 10px;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      z-index: 1000;
      pointer-events: none;
    }
    
         [data-tooltip]:hover::before {
       content: '';
       position: absolute;
       bottom: 112%;
       left: 50%;
       transform: translateX(-50%);
       border: 4px solid transparent;
       border-top-color: rgba(0, 0, 0, 0.8);
       z-index: 1000;
       pointer-events: none;
     }
     
     /* ìˆ˜ë™ì…ë ¥ ë²„íŠ¼ í˜¸ë²„ íš¨ê³¼ */
     #manualInputBtn:hover {
       transform: translateY(-1px);
       box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
     }
     
     /* ê¸°ë³¸ ìƒíƒœ (í°ìƒ‰) í˜¸ë²„ */
     #manualInputBtn[style*="background: white"]:hover {
       background: #f8f9fa !important;
       border-color: #adb5bd !important;
     }
     
     /* í† ê¸€ ìƒíƒœ (ì—°í•œ íšŒìƒ‰) í˜¸ë²„ */
     #manualInputBtn[style*="#f8f9fa"]:hover {
       background: #e9ecef !important;
       border-color: #adb5bd !important;
     }
     
     /* Liquid Glass ì• ë‹ˆë©”ì´ì…˜ */
     @keyframes pulse {
       0%, 100% { 
         transform: scale(1); 
         opacity: 1; 
       }
       50% { 
         transform: scale(1.1); 
         opacity: 0.8; 
       }
     }
     
     @keyframes shimmer {
       0% { transform: translateX(-100%); }
       100% { transform: translateX(100%); }
     }
     
     @keyframes glow {
       0%, 100% { box-shadow: 0 0 5px rgba(255, 255, 255, 0.2); }
       50% { box-shadow: 0 0 20px rgba(255, 255, 255, 0.4); }
     }
     
     /* ì˜ˆì‹œ ì½”ë“œ ë¸”ë¡ ìŠ¤íƒ€ì¼ */
     .glass-example-before pre,
     .glass-example-after pre {
       margin: 0;
       padding: 0;
       background: none;
       border: none;
       font-family: 'Courier New', monospace;
       font-size: 14px;
       line-height: 1.6;
       white-space: pre;
       overflow-x: auto;
     }

     /* ì°¾ê¸°/ë°”ê¾¸ê¸° í•­ëª© ìŠ¤íƒ€ì¼ */
     .glass-find-replace-item {
       background: rgba(255, 255, 255, 0.05);
       border: 1px solid rgba(255, 255, 255, 0.1);
       border-radius: 8px;
       padding: 12px;
       margin: 8px 0;
     }

     .glass-find-replace-item-content {
       display: flex;
       align-items: center;
       gap: 12px;
     }

     .glass-find-replace-item-find,
     .glass-find-replace-item-replace {
       background: rgba(255, 255, 255, 0.1);
       padding: 6px 10px;
       border-radius: 4px;
       font-family: monospace;
       font-size: 13px;
       flex: 1;
       border: 1px solid rgba(255, 255, 255, 0.2);
       color: rgba(255, 255, 255, 0.9);
       outline: none;
     }

     .glass-find-replace-item-find:focus,
     .glass-find-replace-item-replace:focus {
       background: rgba(255, 255, 255, 0.15);
       border-color: rgba(255, 255, 255, 0.3);
     }

     .glass-find-replace-item .btn-remove {
       background: none;
       color: rgba(255, 255, 255, 0.6);
       cursor: pointer;
       padding: 4px;
       font-size: 14px;
       transition: all 0.2s ease;
       margin: 0;
       width: 30px;
       height: 30px;
       border-radius: 8px;
     }

     .glass-find-replace-item .btn-remove:hover {
       color: rgba(255, 255, 255, 0.9);
       transform: scale(1.1);
     }

     /* ì°¾ê¸°/ë°”ê¾¸ê¸° ì¶”ê°€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
     .glass-btn-add {
       color: rgba(255, 255, 255, 0.9);
       padding: 8px 16px;
       border-radius: 8px;
       cursor: pointer;
       transition: all 0.2s ease;
       display: inline-flex;
       align-items: center;
       gap: 6px;
       margin: 0;
       justify-content: center;
       font-size: 20px;
       font-weight: normal;
       border: 1px solid rgba(255, 255, 255, 0.2);
       background: rgba(255, 255, 255, 0.1);
     }

     .glass-btn-add:hover {
       background: rgba(100, 255, 218, 0.15);
       border-color: rgba(100, 255, 218, 0.3);
       transform: translateY(-1px);
     }

     .glass-btn-add:active {
       transform: translateY(0);
     }

     /* ì§ì ‘ ìˆ˜ì • ê°€ëŠ¥í•œ ê²°ê³¼ ì½”ë“œ ìŠ¤íƒ€ì¼ */
     #newCode:not([readonly]) {
       background: rgba(255, 255, 255, 0.05);
       border: 1px solid rgba(255, 255, 255, 0.2);
     }

     /* ë³€ê²½ì  ë¹„êµ ìŠ¤íƒ€ì¼ */
     .diff-content {
       padding: 15px;
       background: rgba(255, 255, 255, 0.05);
       border-radius: 0 0 12px 12px;
     }

     .diff-line {
       font-family: monospace;
       white-space: pre-wrap;
       word-break: break-all;
       line-height: 1.5;
       font-size: 13px;
       display: flex;
     }

     .diff-mark {
       flex-shrink: 0;
       width: 20px;
       color: rgba(255, 255, 255, 0.5);
     }

     .diff-text {
       flex: 1;
       min-width: 0;
     }

     .diff-line.removed {
       background: rgba(255, 82, 82, 0.5);
       color: #fff;
     }

     .diff-line.added {
       background: rgba(100, 255, 167, 0.5);
       color: #fff;
     }

     /* ë³€ê²½ì  í†µê³„ ìŠ¤íƒ€ì¼ */
     .stats {
       display: flex;
       gap: 16px;
       align-items: center;
       margin-left: auto;
       border-radius: 6px;
     }

     .stat-item {
       display: flex;
       align-items: center;
       gap: 6px;
       font-size: 13px;
       color: rgba(255, 255, 255, 0.8);
     }

     .stat-number {
       font-weight: bold;
       color: white;
       line-height: 1;
     }

     .glass-highlight-green,
     .glass-highlight-red {
       color: #fff;
       line-height: 1;
     }

     /* ê²°ê³¼ íŒ¨ë„ ìŠ¤íƒ€ì¼ */
     .result-content {
       padding: 15px;
       background: rgba(255, 255, 255, 0.05);
       border-radius: 0 0 12px 12px;
     }

     .result-content pre.glass-code-text {
       margin: 0;
       font-family: monospace;
       white-space: pre-wrap;
       word-break: break-all;
       line-height: 1.5;
       font-size: 13px;
     }

     /* ë³µì‚¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
     .copy-btn-sm {
       background: none;
       border: 1px solid rgba(255, 255, 255, 0.2);
       color: rgba(255, 255, 255, 0.9);
       padding: 4px 12px;
       border-radius: 6px;
       font-size: 12px;
       cursor: pointer;
       transition: all 0.2s ease;
     }

     .copy-btn-sm:hover {
       background: rgba(255, 255, 255, 0.1);
       border-color: rgba(255, 255, 255, 0.3);
     }

     .copy-btn-sm.copied {
       background: rgba(100, 255, 167, 0.2);
       border-color: rgba(100, 255, 167, 0.3);
     }
   </style>
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <div class="header-center">
        <div class="logo">
          <a href="index.html">
            <img src="assets/images/logo.png" alt="Adapt Style Guide">
          </a>
        </div>
      </div>
      <nav class="main-nav">
        <ul>
          <li><a href="index.html">UI ì»´í¬ë„ŒíŠ¸</a></li>
          <li><a href="#" class="guide-dropdown">ê°€ì´ë“œ ëª¨ìŒ</a>
            <ul class="dropdown-menu">
              <li><a href="custom-guide.html">ì»¤ìŠ¤í…€ ì—˜ë¦¬ë¨¼íŠ¸</a></li>
              <li><a href="google-ads-guide.html">Google Ads ì „í™˜ ì¶”ì </a></li>
              <li><a href="tiktok-pixel-guide.html">TikTok Pixel ì „í™˜ ì¶”ì </a></li>
              <li><a href="chrome-extension-guide.html">í¬ë¡¬ í™•ì¥ í”„ë¡œê·¸ë¨</a></li>
            </ul>
          </li>
          <li><a href="code-prettier.html" class="active">Code Prettier</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <div class="prettier-container">
    <div class="transform-controls">
      <div class="preset-buttons">
        <button class="btn-preset active" onclick="setPreset('selective', this)">ğŸ¯ ì„ íƒì  ë³€ê²½</button>
        <button class="btn-preset" onclick="setPreset('date', this)">ğŸ“… ë‚ ì§œ ë³€ê²½</button>
        <button class="btn-preset" onclick="setPreset('image', this)">ğŸ“· ì´ë¯¸ì§€ ê²½ë¡œ ë³€ê²½</button>
      </div>
      
      <!-- ì •ê·œì‹ íŒ¨í„´ ì„¤ëª… -->
      <div class="glass-settings-box">
        <div class="glass-text-14"><strong>ğŸ’¡ ì •ê·œì‹ íŒ¨í„´ ì„¤ëª…</strong></div>
        <div class="glass-code-text">
          <div><strong>ì°¾ì„ í…ìŠ¤íŠ¸:</strong> <code>/250617\/(01|02|03|04)\.(jpg|png)/g</code></div>
          <div class="glass-text-6"><strong>ë°”ê¿€ í…ìŠ¤íŠ¸ ì˜ˆì‹œ:</strong> <code>250701</code></div>
          <div class="glass-text-8">
            <span class="glass-highlight-red">$1 = íŒŒì¼ë²ˆí˜¸ (01|02|03|04)</span> 
            <span class="glass-highlight-green" style="margin-left: 8px;">$2 = í™•ì¥ì (jpg|png)</span>
          </div>
        </div>
      </div>
      
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 24px;">
        <div class="control-group">
          <label for="findText">ì°¾ì„ í…ìŠ¤íŠ¸ (ì •ê·œì‹ ì§€ì›)</label>
          <div style="display: flex; gap: 8px;">
            <input type="text" id="findText" placeholder="ì˜ˆ: /250617\/(23|25)\.(jpg|png)/g" autocomplete="off" style="flex: 1;" />
            <button class="glass-btn-add" onclick="addFindReplace()" style="padding: 8px; width: 36px; height: 36px;" data-tooltip="ì°¾ê¸°/ë°”ê¾¸ê¸° ì¶”ê°€">
              +
            </button>
          </div>
        </div>
        <div class="control-group">
          <label for="replaceText">ë°”ê¿€ í…ìŠ¤íŠ¸</label>
          <input type="text" id="replaceText" placeholder="ì˜ˆ: 250701" autocomplete="off" />
        </div>
      </div>

      <!-- ì¶”ê°€ëœ ì°¾ê¸°/ë°”ê¾¸ê¸° í•­ëª©ë“¤ -->
      <div id="additionalFindReplace" class="glass-settings-box" style="display: none; margin: 15px 0;"></div>
      
      <div class="control-buttons" style="display: none">
        <button class="btn-glass" onclick="clearAll()">
          ì „ì²´ ì´ˆê¸°í™”
        </button>
        <button class="btn-glass" onclick="transformCode()">
          ì½”ë“œ ë³€í™˜
        </button>
      </div>
    </div>

    <div class="prettier-main">
      <div class="code-panel">
        <div class="panel-header">
          ê¸°ì¡´ ì½”ë“œ
          <span class="badge">Original</span>
        </div>
        
        <!-- ì»¨íŠ¸ë¡¤ ì˜ì—­ -->
        <div class="glass-settings-box">
          <div style="display: flex; gap: 10px; align-items: stretch;">
            <button onclick="toggleManualInput()" id="manualInputBtn" class="glass-btn-manual" data-tooltip="ì‚¬ì´íŠ¸ ì„ íƒ">
                ğŸŒ
            </button>  
            <div style="flex-grow: 1; display: flex; gap: 10px;">
              <input type="text" id="pageUrl" autocomplete="off" placeholder="@ URL ì…ë ¥ (ì˜ˆ: https://95problems.com/product/...)" class="glass-form-element" style="flex-grow: 1;">
              <select id="pageUrlSelect" class="glass-form-element" style="flex-grow: 1; display: none;">
                <option value="">ğŸŒ ì‚¬ì´íŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                <option value="https://8apm.co.kr">8apm.co.kr</option>
                <option value="https://95problems.com">95problems.com</option>
                <option value="https://duorexin.com">duorexin.com</option>
                <option value="https://full-y.co.kr">full-y.co.kr</option>
                <option value="https://food-ology.co.kr">food-ology.co.kr</option>
                <option value="https://obge.co.kr">obge.co.kr</option>
              </select>
            </div>
            <!-- ìë™ ì…ë ¥ ë²„íŠ¼ -->
            <div id="autoControls" style="display: flex; gap: 10px;">
              <button onclick="fetchPageContent()" id="fetchBtn" class="btn-proxy glass-btn-orange">
                ğŸš€ ìë™ ê°€ì ¸ì˜¤ê¸°
              </button>
              <button onclick="previewCode()" id="previewBtn" class="btn-preview">
                âœ¨ ë¯¸ë¦¬ë³´ê¸°
              </button>
            </div>
            <!-- ìˆ˜ë™ ì…ë ¥ ë²„íŠ¼ -->
            <div id="manualControls" style="display: none; gap: 10px;">
              <button onclick="transformCode()" class="btn-proxy glass-btn-orange">
                âš¡ ì½”ë“œ ë³€í™˜í•˜ê¸°
              </button>
              <button onclick="previewCode()" class="btn-preview">
                âœ¨ ë¯¸ë¦¬ë³´ê¸°
              </button>
            </div>
          </div>
          <small class="glass-small-text">
            ğŸ’¡ URL ì…ë ¥ â†’ í”„ë¡ì‹œë¡œ ìë™ ê°€ì ¸ì˜¤ê¸° ë˜ëŠ” ì§ì ‘ ì½”ë“œ ì…ë ¥ í›„ ë³€í™˜
          </small>
        </div>
        
        <textarea 
          class="code-textarea" 
          id="originalCode" 
          placeholder="ê¸°ì¡´ ì½”ë“œë¥¼ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”...&#10;&#10;ë˜ëŠ” ìœ„ì˜ URL ì…ë ¥ í›„ ìë™ ê°€ì ¸ì˜¤ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì„¸ìš”&#10;&#10;ì˜ˆì‹œ:&#10;<img src='/images/old/logo.png' alt='ë¡œê³ '>&#10;<div class='old-class'>ë‚´ìš©</div>"
          oninput="handleCodeInput(this.value)"
        ></textarea>
      </div>
      
      <div class="code-panel">
        <div class="panel-header">
          ìƒˆë¡œìš´ ì½”ë“œ
          <span class="badge glass-highlight-green">Modified</span>
        </div>
        <textarea 
          class="code-textarea" 
          id="newCode" 
          placeholder="ë³€í™˜ëœ ì½”ë“œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤..."
          readonly
          style="height: 505px;"
          oninput="showDiff(document.getElementById('originalCode').value, this.value)"
        ></textarea>
      </div>
    </div>

    <div class="diff-panel">
      <div class="panel-header">
        ë³€ê²½ì  ë¹„êµ
        <div class="stats" id="diffStats" style="display: none; margin-bottom: 0">
          <div class="stat-item">
            <span class="glass-highlight-green">+</span>
            <span class="stat-number" id="addedLines">0</span>
            <span>ì¶”ê°€</span>
          </div>
          <div class="stat-item">
            <span class="glass-highlight-red">-</span>
            <span class="stat-number" id="removedLines">0</span>
            <span>ì‚­ì œ</span>
          </div>
        </div>
      </div>
      <div class="diff-content" id="diffContent">
        ì—¬ê¸°ì—ì„œ ë³€ê²½ì ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </div>
    </div>

    <div class="result-panel">
      <div class="panel-header">
        ìµœì¢… ê²°ê³¼
        <button class="copy-btn-sm" onclick="copyResult()">
          ë³µì‚¬
        </button>
      </div>
      <div class="result-content" id="resultContent">
        ë³€í™˜ëœ ìµœì¢… ì½”ë“œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
      </div>
    </div>

    <!-- ì‚¬ìš© ì˜ˆì‹œ ì„¹ì…˜ -->
    <div class="result-panel" style="margin-top: 40px;">
      <div class="panel-header">
        <h3 class="glass-heading">ì‚¬ìš© ì˜ˆì‹œ</h3>
      </div>
      
      <div style="background: rgba(255, 255, 255, 0.05); border-radius: 0 0 12px 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); padding: 30px; backdrop-filter: blur(20px);">
        <!-- ì˜ˆì‹œ 1: ì„ íƒì  ë³€ê²½ -->
        <div class="example-section" style="margin-bottom: 40px;">
          <h3 style="margin-bottom: 15px;">ì„ íƒì  ë³€ê²½ ì˜ˆì‹œ</h3>
          <p class="glass-paragraph">23ë²ˆê³¼ 25ë²ˆ ì´ë¯¸ì§€ë§Œ ë‚ ì§œë¥¼ 250617ì—ì„œ 250701ë¡œ ë³€ê²½í•˜ëŠ” ê²½ìš°</p>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <div>
              <div class="glass-example-before">
                <h4>ë³€ê²½ ì „</h4>
                <pre class="glass-text-white">&lt;div class="product_detail_wrap"&gt;
  &lt;img src="/img/detail/P000000L/<span class="glass-highlight-red">250617</span>/22.jpg"&gt;
  &lt;img src="/img/detail/P000000L/<span class="glass-highlight-red">250617</span>/23.jpg"&gt;
  &lt;img src="/img/detail/P000000L/<span class="glass-highlight-red">250617</span>/24.jpg"&gt;
  &lt;img src="/img/detail/P000000L/<span class="glass-highlight-red">250617</span>/25.jpg"&gt;
&lt;/div&gt;</pre>
              </div>
            </div>
            
            <div>
              <div class="glass-example-after">
                <h4>ë³€ê²½ í›„</h4>
                <pre class="glass-text-white">&lt;div class="product_detail_wrap"&gt;
  &lt;img src="/img/detail/P000000L/250617/22.jpg"&gt;
  &lt;img src="/img/detail/P000000L/<span class="glass-highlight-green">250701</span>/23.jpg"&gt;
  &lt;img src="/img/detail/P000000L/250617/24.jpg"&gt;
  &lt;img src="/img/detail/P000000L/<span class="glass-highlight-green">250701</span>/25.jpg"&gt;
&lt;/div&gt;</pre>
              </div>
            </div>
          </div>
          
          <div class="glass-settings-box">
            <h4>ì„¤ì •ê°’</h4>
            <div class="glass-monospace">
              <div><strong>ì°¾ì„ í…ìŠ¤íŠ¸:</strong> <code>/250617\/(23|25)\.(jpg|png)/g</code></div>
              <div><strong>ë°”ê¿€ í…ìŠ¤íŠ¸:</strong> <code>250701/$1.$2</code></div>
            </div>
          </div>
        </div>

        <!-- ì‚¬ìš© íŒ -->
        <div class="glass-settings-box">
          <h4>ğŸ’¡ ì‚¬ìš© íŒ</h4>
          <ul class="glass-text-tip">
            <li><strong>ì •ê·œì‹ í™œìš©:</strong> ë³µì¡í•œ íŒ¨í„´ì€ ì •ê·œì‹ìœ¼ë¡œ ì²˜ë¦¬ (ì˜ˆ: <code>/old\d+/g</code>)</li>
            <li><strong>ë°±ì—… í•„ìˆ˜:</strong> ëŒ€ëŸ‰ ë³€ê²½ ì „ì—ëŠ” ë°˜ë“œì‹œ ì›ë³¸ ì½”ë“œë¥¼ ë°±ì—…í•˜ì„¸ìš”</li>
            <li><strong>ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸:</strong> ì‘ì€ ë¶€ë¶„ë¶€í„° í…ŒìŠ¤íŠ¸ í›„ ì „ì²´ ì ìš©</li>
            <li><strong>ë¯¸ë¦¬ë³´ê¸° í™•ì¸:</strong> ë³€í™˜ ê²°ê³¼ë¥¼ ë°˜ë“œì‹œ í™•ì¸ í›„ ë³µì‚¬</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- í”Œë¡œíŒ… ë¹„ë©”ì˜¤ ë²„íŠ¼ -->
  <button class="floating-btn floating-vimeo-btn" onclick="document.getElementById('vimeoGeneratorModal').open()" title="ë¹„ë©”ì˜¤ ì½”ë“œ ìƒì„±ê¸°">
    <span>ë¹„ë©”ì˜¤ ì½”ë“œ ìƒì„±ê¸°</span>
  </button>

  <!-- ë¹„ë©”ì˜¤ ì½”ë“œ ìƒì„±ê¸° ëª¨ë‹¬ -->
  <site-modal id="vimeoGeneratorModal">
    <div class="modal-header">
      <h3>ë¹„ë©”ì˜¤ ì½”ë“œ ìƒì„±ê¸°</h3>
      <button class="usage-guide-close" onclick="document.getElementById('vimeoGeneratorModal').close()" aria-label="ë‹«ê¸°">&times;</button>
    </div>
    <div class="modal-body">
      <!-- ì‚¬ìš©ë²• ê°€ì´ë“œ -->
      <div class="vimeo-guide">
        <h4 style="margin: 0 0 10px 0; font-size: 16px;">ë¹„ë©”ì˜¤ ë‹¤ì´ë ‰íŠ¸ ë§í¬ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•</h4>
        <div class="guide-steps" style="font-size: 14px; line-height: 1.6; display: none;">
          <p style="margin: 8px 0;"><strong>1.</strong> ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ë™ì˜ìƒì„ ì—½ë‹ˆë‹¤</p>
          <p style="margin: 8px 0;"><strong>2.</strong> ë™ì˜ìƒ ì„¤ì • í˜ì´ì§€ì˜ ì˜¤ë¥¸ìª½ ìƒë‹¨ ëª¨ì„œë¦¬ì— ìˆëŠ” <strong>ì˜µì…˜ ë©”ë‰´ (â€¦)</strong>ë¥¼ ì„ íƒí•©ë‹ˆë‹¤</p>
          <p style="margin: 8px 0;"><strong>3.</strong> <strong>Video file links</strong>ë¥¼ ì„ íƒí•©ë‹ˆë‹¤</p>
          <p style="margin: 8px 0;"><strong>4.</strong> ëª¨ë‹¬ ì°½ì˜ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ì—ì„œ <strong>Play The Video</strong>ë¥¼ ì„ íƒí•©ë‹ˆë‹¤</p>
          <p style="margin: 8px 0;"><strong>5.</strong> ê°€ì ¸ì˜¤ë ¤ëŠ” í™”ì§ˆì˜ <strong>Copy Link</strong>ë¥¼ ì„ íƒí•©ë‹ˆë‹¤</p>
          <p style="margin: 8px 0;"><strong>6.</strong> ë³µì‚¬ëœ ë§í¬ë¥¼ ì•„ë˜ ì…ë ¥ì°½ì— ë¶™ì—¬ë„£ê¸°í•˜ê³  ì½”ë“œë¥¼ ìƒì„±í•˜ì„¸ìš”</p>
        </div>
                        <button onclick="toggleVimeoGuide()" class="glass-btn-underline">
          ê°€ì´ë“œ í¼ì¹˜ê¸°
        </button>
      </div>
      
      <div class="vimeo-generator">
        <label for="vimeoUrl">ë¹„ë©”ì˜¤ ë§í¬ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”:</label>
        <input type="url" id="vimeoUrl" placeholder="https://player.vimeo.com/progressive_redirect/playbook/..." autocomplete="off" class="glass-input-url">
        
        <div class="vimeo-options">
          <label style="display: flex; align-items: center; margin: 10px 0;">
            <input type="checkbox" id="vimeoMuted" checked style="margin-right: 8px;">
            ìŒì†Œê±° (muted)
          </label>
          <label style="display: flex; align-items: center; margin: 10px 0;">
            <input type="checkbox" id="vimeoAutoplay" checked style="margin-right: 8px;">
            ìë™ì¬ìƒ (autoplay)
          </label>
          <label style="display: flex; align-items: center; margin: 10px 0;">
            <input type="checkbox" id="vimeoLoop" checked style="margin-right: 8px;">
            ë°˜ë³µì¬ìƒ (loop)
          </label>
          <label style="display: flex; align-items: center; margin: 10px 0;">
            <input type="checkbox" id="vimeoPlaysinline" checked style="margin-right: 8px;">
            ì¸ë¼ì¸ ì¬ìƒ (playsinline)
          </label>
        </div>
        
        <button onclick="generateVimeoCode()" class="glass-btn-blue">
          HTML ì½”ë“œ ìƒì„±
        </button>
        
        <div class="generated-code" style="display: none;">
          <label>ìƒì„±ëœ HTML ì½”ë“œ:</label>
          <textarea id="generatedCode" readonly class="glass-textarea"></textarea>
          <button onclick="copyGeneratedCode()" class="glass-btn-green">
            ğŸ“‹ ì½”ë“œ ë³µì‚¬
          </button>
        </div>
      </div>
    </div>
  </site-modal>

  <script>
    // í”„ë¦¬ì…‹ ì„¤ì •
    function setPreset(type, button) {
      // ê¸°ì¡´ í™œì„±í™”ëœ ë²„íŠ¼ ë¹„í™œì„±í™”
      document.querySelectorAll('.btn-preset').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // í˜„ì¬ ë²„íŠ¼ í™œì„±í™”
      button.classList.add('active');
      
      // í”„ë¦¬ì…‹ íƒ€ì…ì— ë”°ë¥¸ ì…ë ¥ê°’ ì„¤ì •
      const presets = {
        selective: {
          find: '/250617\\/(23|25)\\.(jpg|png)/g',
          replace: '250701/$1.$2'
        },
        date: {
          find: '250617',
          replace: '250701'
        },
        image: {
          find: '/images/old/',
          replace: '/images/new/'
        }
      };
      
      // ì…ë ¥ í•„ë“œì— í”„ë¦¬ì…‹ ê°’ ì„¤ì •
      document.getElementById('findText').value = presets[type].find;
      document.getElementById('replaceText').value = presets[type].replace;
    }

    // ì½”ë“œ ë³€í™˜ í•¨ìˆ˜
    function transformCode() {
      const originalCode = document.getElementById('originalCode').value;
      const findText = document.getElementById('findText').value;
      const replaceText = document.getElementById('replaceText').value;
      const newCodeTextarea = document.getElementById('newCode');
      const resultContent = document.getElementById('resultContent');
      
      if (!originalCode.trim()) {
        alert('ê¸°ì¡´ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      let modifiedCode = originalCode;
      
      // í˜„ì¬ ì…ë ¥ëœ ì°¾ê¸°/ë°”ê¾¸ê¸° ì²˜ë¦¬
      if (findText && replaceText) {
        try {
          // ì •ê·œì‹ íŒ¨í„´ ì²˜ë¦¬
          let pattern = findText;
          let flags = 'g';
          
          // /pattern/flags í˜•ì‹ì¸ ê²½ìš°ì—ë§Œ ì •ê·œì‹ìœ¼ë¡œ ì²˜ë¦¬
          const regexMatch = findText.match(/^\/(.+)\/([gimuy]*)$/);
          if (regexMatch) {
            pattern = regexMatch[1];
            flags = regexMatch[2] || 'g';
            modifiedCode = modifiedCode.replace(new RegExp(pattern, flags), replaceText);
          } else {
            // ì¼ë°˜ í…ìŠ¤íŠ¸ëŠ” ì „ì—­ ì¹˜í™˜
            modifiedCode = modifiedCode.split(pattern).join(replaceText);
          }
        } catch (error) {
          console.error('ì •ê·œì‹ ì—ëŸ¬:', error);
          alert('ì˜ëª»ëœ ì •ê·œì‹ íŒ¨í„´ì…ë‹ˆë‹¤.');
          return;
        }
      }
      
      // ì¶”ê°€ëœ ì°¾ê¸°/ë°”ê¾¸ê¸° í•­ëª©ë“¤ ì²˜ë¦¬
      const additionalItems = document.querySelectorAll('.glass-find-replace-item');
      additionalItems.forEach(item => {
        const findValue = item.querySelector('.glass-find-replace-item-find').value;
        const replaceValue = item.querySelector('.glass-find-replace-item-replace').value;
        
        try {
          // ì •ê·œì‹ íŒ¨í„´ ì²˜ë¦¬
          let pattern = findValue;
          let flags = 'g';
          
          // /pattern/flags í˜•ì‹ì¸ ê²½ìš°ì—ë§Œ ì •ê·œì‹ìœ¼ë¡œ ì²˜ë¦¬
          const regexMatch = findValue.match(/^\/(.+)\/([gimuy]*)$/);
          if (regexMatch) {
            pattern = regexMatch[1];
            flags = regexMatch[2] || 'g';
            modifiedCode = modifiedCode.replace(new RegExp(pattern, flags), replaceValue);
          } else {
            // ì¼ë°˜ í…ìŠ¤íŠ¸ëŠ” ì „ì—­ ì¹˜í™˜
            modifiedCode = modifiedCode.split(pattern).join(replaceValue);
          }
        } catch (error) {
          console.error('ì •ê·œì‹ ì—ëŸ¬:', error);
        }
      });
      
      // ê²°ê³¼ í‘œì‹œ
      newCodeTextarea.value = modifiedCode;
      newCodeTextarea.readOnly = false;  // ì§ì ‘ ìˆ˜ì • ê°€ëŠ¥í•˜ë„ë¡
      
      // ë³€ê²½ì  ë¹„êµ í‘œì‹œ
      showDiff(originalCode, modifiedCode);
      
      // ìµœì¢… ê²°ê³¼ í‘œì‹œ
      resultContent.innerHTML = `<pre class="glass-code-text">${escapeHtml(modifiedCode)}</pre>`;
    }

    // ì°¨ì´ì  í‘œì‹œ í•¨ìˆ˜
    function showDiff(original, modified) {
      const originalLines = original.split('\n');
      const modifiedLines = modified.split('\n');
      const diffContent = document.getElementById('diffContent');
      const diffStats = document.getElementById('diffStats');
      
      let html = '';
      let addedCount = 0;
      let removedCount = 0;
      
      const maxLines = Math.max(originalLines.length, modifiedLines.length);
      
      for (let i = 0; i < maxLines; i++) {
        const originalLine = originalLines[i] || '';
        const modifiedLine = modifiedLines[i] || '';
        
        if (originalLine !== modifiedLine) {
          if (originalLine) {
            html += `<div class="diff-line removed"><span class="diff-mark">-</span><span class="diff-text">${escapeHtml(originalLine)}</span></div>`;
            removedCount++;
          }
          if (modifiedLine) {
            html += `<div class="diff-line added"><span class="diff-mark">+</span><span class="diff-text">${escapeHtml(modifiedLine)}</span></div>`;
            addedCount++;
          }
        } else if (originalLine.trim()) {
          html += `<div class="diff-line"><span class="diff-mark"> </span><span class="diff-text">${escapeHtml(originalLine)}</span></div>`;
        }
      }
      
      // ë³€ê²½ì ì´ ìˆì„ ë•Œë§Œ í†µê³„ í‘œì‹œ
      if (addedCount > 0 || removedCount > 0) {
        diffStats.style.display = 'flex';
        document.getElementById('addedLines').textContent = addedCount;
        document.getElementById('removedLines').textContent = removedCount;
        diffContent.innerHTML = html;
      } else {
        diffStats.style.display = 'none';
        diffContent.innerHTML = '<div class="diff-empty">ë³€ê²½ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
      }
    }

    // HTML ì´ìŠ¤ì¼€ì´í”„ í•¨ìˆ˜
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // ì „ì²´ ì´ˆê¸°í™” í•¨ìˆ˜
    function clearAll() {
      document.getElementById('originalCode').value = '';
      document.getElementById('newCode').value = '';
      document.getElementById('findText').value = '';
      document.getElementById('replaceText').value = '';
      document.getElementById('additionalFindReplace').innerHTML = '';
      document.getElementById('additionalFindReplace').style.display = 'none';
      document.getElementById('diffStats').style.display = 'none';
      document.getElementById('diffContent').innerHTML = 'ë³€ê²½ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.';
      document.getElementById('resultContent').innerHTML = 'ë³€í™˜ëœ ìµœì¢… ì½”ë“œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.';
      
      // URL ì…ë ¥ ëª¨ë“œë¡œ ì „í™˜
      const manualInputBtn = document.getElementById('manualInputBtn');
      const urlControls = document.getElementById('urlControls');
      const transformControls = document.getElementById('transformControls');
      const urlHint = document.getElementById('urlHint');
      const transformHint = document.getElementById('transformHint');
      
      manualInputBtn.style.background = '';
      manualInputBtn.style.color = '';
      urlControls.style.display = 'flex';
      transformControls.style.display = 'none';
      urlHint.style.display = 'block';
      transformHint.style.display = 'none';
    }

    // ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° (ì˜µì…˜)
    document.getElementById('originalCode').addEventListener('input', function() {
      const findText = document.getElementById('findText').value;
      const replaceText = document.getElementById('replaceText').value;
      
      if (this.value && findText && replaceText) {
        // ìë™ ë³€í™˜ì€ ì‚¬ìš©ìê°€ ì›í•  ë•Œë§Œ í™œì„±í™”
        // transformCode();
      }
    });

    // ë°”ê¿€ í…ìŠ¤íŠ¸ ìë™ ì™„ì„± ê¸°ëŠ¥
    document.getElementById('replaceText').addEventListener('input', function() {
      const findText = document.getElementById('findText').value;
      const replaceText = this.value;
      
      // ì°¾ì„ í…ìŠ¤íŠ¸ê°€ ì •ê·œì‹ íŒ¨í„´ì´ê³ , ë°”ê¿€ í…ìŠ¤íŠ¸ê°€ ê°„ë‹¨í•œ í˜•íƒœì¼ ë•Œ ìë™ ì™„ì„±
      if (findText.includes('/(') && findText.includes('|') && findText.includes(')\\.(') && replaceText && !replaceText.includes('$')) {
        // í˜„ì¬ ì»¤ì„œ ìœ„ì¹˜ ì €ì¥
        const cursorPos = this.selectionStart;
        const originalLength = replaceText.length;
        
        // $1.$2ê°€ ì—†ê³  ë‹¨ìˆœí•œ í…ìŠ¤íŠ¸ë§Œ ìˆëŠ” ê²½ìš°
        if (!replaceText.includes('$1') && !replaceText.includes('$2')) {
          const newValue = replaceText + '/$1.$2';
          this.value = newValue;
          
          // ì»¤ì„œë¥¼ ì¶”ê°€ëœ í…ìŠ¤íŠ¸ ì•ì— ìœ„ì¹˜ì‹œí‚´ (ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë¶€ë¶„ ë)
          this.setSelectionRange(originalLength, originalLength);
        }
      }
    });

    // í˜ì´ì§€ ì½˜í…ì¸  ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜
    async function fetchPageContent() {
      const urlInput = document.getElementById('pageUrl');
      const urlSelect = document.getElementById('pageUrlSelect');
      
      // í˜„ì¬ í™œì„±í™”ëœ ì…ë ¥ ë°©ì‹ì— ë”°ë¼ URL ê°€ì ¸ì˜¤ê¸°
      let selectedUrl = '';
      if (urlSelect.style.display === 'block') {
        // ì‚¬ì´íŠ¸ ì„ íƒ ëª¨ë“œ
        selectedUrl = urlSelect.value;
        if (!selectedUrl) {
          alert('ì‚¬ì´íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
          return;
        }
      } else if (urlInput.style.display !== 'none') {
        // URL ì…ë ¥ ëª¨ë“œ
        selectedUrl = urlInput.value;
        if (!selectedUrl) {
          alert('URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
          return;
        }
        if (!selectedUrl.startsWith('http')) {
          alert('ì˜¬ë°”ë¥¸ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”. (http:// ë˜ëŠ” https://ë¡œ ì‹œì‘)');
          return;
        }
      } else {
        alert('URLì„ ì…ë ¥í•˜ê±°ë‚˜ ì‚¬ì´íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }

      // ë¡œë”© í‘œì‹œ
      const button = event.target;
      const originalText = button.innerHTML;
      button.innerHTML = 'â³ ê°€ì ¸ì˜¤ëŠ” ì¤‘...';
      button.disabled = true;

      try {
        let htmlContent;
        let success = false;
        
        // ì—¬ëŸ¬ í”„ë¡ì‹œ ì„œë¹„ìŠ¤ ì‹œë„ (ì„±ê³µë¥  ë†’ì€ ìˆœì„œ)
        const proxyServices = [
          {
            name: 'CodeTabs',
            url: `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(selectedUrl)}`,
            parse: (data) => data
          },
          {
            name: 'AllOrigins',
            url: `https://api.allorigins.win/get?url=${encodeURIComponent(selectedUrl)}`,
            parse: (data) => data.contents
          },
          {
            name: 'ThingProxy',
            url: `https://thingproxy.freeboard.io/fetch/${selectedUrl}`,
            parse: (data) => data
          }
        ];
        
        for (let i = 0; i < proxyServices.length; i++) {
          const proxy = proxyServices[i];
          try {
            button.innerHTML = `â³ ${proxy.name} ì‹œë„ ì¤‘... (${i + 1}/${proxyServices.length})`;
            
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 15000); // 15ì´ˆ íƒ€ì„ì•„ì›ƒ
            
            const response = await fetch(proxy.url, {
              method: 'GET',
              headers: {
                'Accept': 'application/json, text/plain, */*',
                'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36'
              },
              signal: controller.signal
            });
            
            clearTimeout(timeoutId);
            
            if (!response.ok) {
              throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            const data = proxy.name === 'AllOrigins' ? await response.json() : await response.text();
            htmlContent = proxy.parse(data);
            
            if (htmlContent && htmlContent.length > 100) {
              success = true;
              console.log(`âœ… ${proxy.name} ì„±ê³µ!`);
              break;
            } else {
              throw new Error('ì‘ë‹µ ë°ì´í„°ê°€ ë„ˆë¬´ ì‘ìŒ');
            }
          } catch (proxyError) {
            console.log(`âŒ ${proxy.name} ì‹¤íŒ¨:`, proxyError.message);
            
            // ë§ˆì§€ë§‰ ì„œë¹„ìŠ¤ê°€ ì•„ë‹ˆë©´ ì ì‹œ ëŒ€ê¸°
            if (i < proxyServices.length - 1) {
              button.innerHTML = `â³ ë‹¤ìŒ ì„œë¹„ìŠ¤ ì‹œë„ ì¤‘... (${i + 2}/${proxyServices.length})`;
              await new Promise(resolve => setTimeout(resolve, 1000));
            }
            continue;
          }
        }
        
        if (!success) {
          throw new Error(`ëª¨ë“  í”„ë¡ì‹œ ì„œë¹„ìŠ¤ ì‹¤íŒ¨\n\nğŸš« ì‹¤íŒ¨í•œ ì„œë¹„ìŠ¤ë“¤:\n${proxyServices.map(p => `â€¢ ${p.name}`).join('\n')}\n\nğŸ’¡ í•´ê²° ë°©ë²•:\n1. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„\n2. ì¸í„°ë„· ì—°ê²° í™•ì¸\n3. VPN ì‚¬ìš© ì¤‘ì´ë©´ í•´ì œ\n4. ìˆ˜ë™ ë³µì‚¬ ë°©ë²• ì‚¬ìš©`);
        }
        
        // HTML íŒŒì‹±í•˜ì—¬ product_detail_wrap ì°¾ê¸°
        const parser = new DOMParser();
        const doc = parser.parseFromString(htmlContent, 'text/html');
        
        // product_detail_wrap í´ë˜ìŠ¤ ì°¾ê¸°
        let targetContent = '';
        const productDetailWrap = doc.querySelector('.product_detail_wrap');
        
        if (productDetailWrap) {
          targetContent = productDetailWrap.innerHTML;
        } else {
          const domain = new URL(selectedUrl).hostname;
          let siteSpecificSelectors = [];
          
          if (domain.includes('95problems.com')) {
            siteSpecificSelectors = [
              '.product_detail_wrap', '.product-detail-imgview', '.imgview', '.xans-product-detail', 
              '.product-detail-area', '.detail-content', '.product_content', '.front-detail'
            ];
          }
          
          // ì¼ë°˜ì ì¸ ìƒí’ˆ ìƒì„¸ ì˜ì—­ ì„ íƒìë“¤
          const generalSelectors = [
            '.product-detail', '.product_detail', '.product-detail-imgview', '.imgview', '.detail_wrap', 
            '.product-content', '.item-detail', '#product-detail',
            '.goods-detail', '.detail-area', '.product-info', '.front-detail'
          ];
          
          // ì‚¬ì´íŠ¸ë³„ + ì¼ë°˜ ì„ íƒì í†µí•©
          const allSelectors = [...siteSpecificSelectors, ...generalSelectors];
          
          for (const selector of allSelectors) {
            const element = doc.querySelector(selector);
            if (element) {
              targetContent = element.innerHTML;
              break;
            }
          }
          
          // ì•„ë¬´ê²ƒë„ ëª» ì°¾ì•˜ìœ¼ë©´ bodyì—ì„œ ì´ë¯¸ì§€ë‚˜ ì˜ìƒì´ í¬í•¨ëœ í° ì„¹ì…˜ ì°¾ê¸°
          if (!targetContent) {
            const sections = doc.querySelectorAll('div, section, article');
            for (const section of sections) {
              const imgs = section.querySelectorAll('img');
              const videos = section.querySelectorAll('video');
              if ((imgs.length + videos.length) >= 3 && section.innerHTML.length > 1000) {
                targetContent = section.innerHTML;
                break;
              }
            }
          }
        }
        
        if (targetContent) {
          // ë ˆì´ì§€ë¡œë”© ì²˜ë¦¬ ì ìš©
          const processedDoc = new DOMParser().parseFromString(targetContent, 'text/html');
          
          // ì´ë¯¸ì§€ ë ˆì´ì§€ë¡œë”© ì²˜ë¦¬
          const images = processedDoc.querySelectorAll('img[data-src], img[data-original], img[ec-data-src], img[lazy-src]');
          images.forEach(img => {
            if (img.dataset.src) {
              img.src = img.dataset.src;
              img.removeAttribute('data-src');
            }
            if (img.dataset.original) {
              img.src = img.dataset.original;
              img.removeAttribute('data-original');
            }
            if (img.getAttribute('ec-data-src')) {
              img.src = img.getAttribute('ec-data-src');
              img.removeAttribute('ec-data-src');
            }
            if (img.getAttribute('lazy-src')) {
              img.src = img.getAttribute('lazy-src');
              img.removeAttribute('lazy-src');
            }
          });
          
          // ë¹„ë””ì˜¤ ë ˆì´ì§€ë¡œë”© ì²˜ë¦¬
          const videos = processedDoc.querySelectorAll('video[lazy-src]');
          videos.forEach(video => {
            if (video.getAttribute('lazy-src')) {
              video.src = video.getAttribute('lazy-src');
              video.removeAttribute('lazy-src');
            }
          });
          
          // ë¶ˆí•„ìš”í•œ ë°ì´í„° ì†ì„± ì œê±°
          const elements = processedDoc.querySelectorAll('*');
          elements.forEach(el => {
            for (const attr of el.attributes) {
              if (attr.name.startsWith('data-') && !['data-src', 'data-original'].includes(attr.name)) {
                el.removeAttribute(attr.name);
              }
            }
          });
          
          // ê²°ê³¼ ì—…ë°ì´íŠ¸
          document.getElementById('originalCode').value = processedDoc.body.innerHTML;
          
          // ì„±ê³µ ë©”ì‹œì§€
          button.innerHTML = 'âœ… ì™„ë£Œ!';
          setTimeout(() => {
            button.innerHTML = originalText;
            button.disabled = false;
          }, 2000);
          
        } else {
          // íŠ¹ì • ì„ íƒìë¥¼ ì°¾ì§€ ëª»í–ˆì„ ë•Œ ì „ì²´ body ë‚´ìš© ì‚¬ìš©
          const bodyElement = doc.querySelector('body');
          if (bodyElement && bodyElement.innerHTML.length > 100) {
            targetContent = bodyElement.innerHTML;
            
            // ë ˆì´ì§€ë¡œë”© ì²˜ë¦¬ ì ìš©
            const processedDoc = new DOMParser().parseFromString(targetContent, 'text/html');
            
            // ì´ë¯¸ì§€ ë ˆì´ì§€ë¡œë”© ì²˜ë¦¬
            const images = processedDoc.querySelectorAll('img[data-src], img[data-original], img[ec-data-src], img[lazy-src]');
            images.forEach(img => {
              if (img.dataset.src) {
                img.src = img.dataset.src;
                img.removeAttribute('data-src');
              }
              if (img.dataset.original) {
                img.src = img.dataset.original;
                img.removeAttribute('data-original');
              }
              if (img.getAttribute('ec-data-src')) {
                img.src = img.getAttribute('ec-data-src');
                img.removeAttribute('ec-data-src');
              }
              if (img.getAttribute('lazy-src')) {
                img.src = img.getAttribute('lazy-src');
                img.removeAttribute('lazy-src');
              }
            });
            
            // ë¹„ë””ì˜¤ ë ˆì´ì§€ë¡œë”© ì²˜ë¦¬
            const videos = processedDoc.querySelectorAll('video[lazy-src]');
            videos.forEach(video => {
              if (video.getAttribute('lazy-src')) {
                video.src = video.getAttribute('lazy-src');
                video.removeAttribute('lazy-src');
              }
            });
            
            // ë¶ˆí•„ìš”í•œ ë°ì´í„° ì†ì„± ì œê±°
            const elements = processedDoc.querySelectorAll('*');
            elements.forEach(el => {
              for (const attr of el.attributes) {
                if (attr.name.startsWith('data-') && !['data-src', 'data-original'].includes(attr.name)) {
                  el.removeAttribute(attr.name);
                }
              }
            });
            
            // ê²°ê³¼ ì—…ë°ì´íŠ¸
            document.getElementById('originalCode').value = processedDoc.body.innerHTML;
            
            // ì„±ê³µ ë©”ì‹œì§€ (ì „ì²´ ë‚´ìš©ìœ¼ë¡œ ê°€ì ¸ì™”ìŒì„ í‘œì‹œ)
            button.innerHTML = 'âœ… ì „ì²´ ë‚´ìš©';
            setTimeout(() => {
              button.innerHTML = originalText;
              button.disabled = false;
            }, 2000);
            
            // ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´
            setTimeout(() => {
              alert('ğŸ” ìƒí’ˆ ìƒì„¸ ì˜ì—­ì„ ìë™ìœ¼ë¡œ ì°¾ì§€ ëª»í•´ ì „ì²´ í˜ì´ì§€ ë‚´ìš©ì„ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.\n\nğŸ’¡ íŒ: ë¶ˆí•„ìš”í•œ ë¶€ë¶„ì„ ì§ì ‘ ì‚­ì œí•˜ê³  í•„ìš”í•œ ë¶€ë¶„ë§Œ ë‚¨ê²¨ì£¼ì„¸ìš”.');
            }, 1000);
          } else {
            throw new Error('í˜ì´ì§€ ë‚´ìš©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
          }
        }
        
      } catch (error) {
        console.error('í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);
        
        // ì‹¤íŒ¨ ì‹œ ì•ˆë‚´
        button.innerHTML = 'âŒ ì‹¤íŒ¨';
        setTimeout(() => {
          button.innerHTML = originalText;
          button.disabled = false;
        }, 2000);
        
        // í”„ë¡ì‹œ ì‹¤íŒ¨ ì‹œ ìë™ìœ¼ë¡œ ìˆ˜ë™ ë³µì‚¬ ì•ˆë‚´
        const errorMsg = `ğŸš« ìë™ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨\n\n${error.message}\n\nğŸ“‹ ìˆ˜ë™ ë³µì‚¬ ë°©ë²•:\n1. í•´ë‹¹ í˜ì´ì§€ë¥¼ ìƒˆ íƒ­ì—ì„œ ì—´ê¸°\n2. F12(ê°œë°œìë„êµ¬) â†’ Elements íƒ­\n3. Ctrl+Fë¡œ ê²€ìƒ‰: "product_detail_wrap" ë˜ëŠ” "imgview"\n4. í•´ë‹¹ ì˜ì—­ ìš°í´ë¦­ â†’ Copy â†’ Copy outerHTML\n5. ì—¬ê¸° ê¸°ì¡´ ì½”ë“œ ì˜ì—­ì— ë¶™ì—¬ë„£ê¸°\n\nğŸ’¡ ë¶™ì—¬ë„£ê¸° ì‹œ ë ˆì´ì§€ë¡œë”©ì´ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤!`;
        
        const openPage = confirm(errorMsg + '\n\nì§€ê¸ˆ í•´ë‹¹ í˜ì´ì§€ë¥¼ ìƒˆ íƒ­ì—ì„œ ì—´ê¹Œìš”?');
        if (openPage) {
          window.open(selectedUrl, '_blank');
          
          // í˜ì´ì§€ ì—´ê¸° í›„ ì¶”ê°€ ì•ˆë‚´
          setTimeout(() => {
            alert('ğŸ“‹ ë³µì‚¬ íŒ:\n\n1. ê°œë°œìë„êµ¬ì—ì„œ ìƒí’ˆ ìƒì„¸ ì˜ì—­ ì°¾ê¸°\n   (product_detail_wrap, imgview, product-detail-imgview ë“±)\n2. í•´ë‹¹ ìš”ì†Œ ìš°í´ë¦­\n3. Copy â†’ Copy outerHTML\n4. ì—¬ê¸° ë¶™ì—¬ë„£ê¸°\n\nâœ… ë ˆì´ì§€ë¡œë”©ì´ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤!');
          }, 1000);
        }
      }
    }

    // ìˆ˜ë™ ì…ë ¥ í† ê¸€ í•¨ìˆ˜
    function toggleManualInput() {
      const urlInput = document.getElementById('pageUrl');
      const urlSelect = document.getElementById('pageUrlSelect');
      const manualBtn = document.getElementById('manualInputBtn');
      const autoControls = document.getElementById('autoControls');
      const manualControls = document.getElementById('manualControls');
      
      // í˜„ì¬ ìƒíƒœ í™•ì¸ (URL ì…ë ¥ í•„ë“œê°€ ë³´ì´ë©´ URL ì…ë ¥ ëª¨ë“œ)
      const isUrlInputMode = urlInput.style.display !== 'none';
      
      if (isUrlInputMode) {
        // URL ì…ë ¥ ëª¨ë“œ â†’ ì‚¬ì´íŠ¸ ì„ íƒ ëª¨ë“œ
        urlInput.style.display = 'none';
        urlSelect.style.display = 'block';
        manualBtn.innerHTML = 'âœï¸';
        manualBtn.setAttribute('data-tooltip', 'URL ì…ë ¥');
        autoControls.style.display = 'none';
        manualControls.style.display = 'flex';  // ì½”ë“œ ë³€í™˜í•˜ê¸° ë²„íŠ¼
        urlSelect.value = '';
        
        console.log('ì‚¬ì´íŠ¸ ì„ íƒ ëª¨ë“œë¡œ ì „í™˜ - ì½”ë“œ ë³€í™˜í•˜ê¸°');
      } else {
        // ì‚¬ì´íŠ¸ ì„ íƒ ëª¨ë“œ â†’ URL ì…ë ¥ ëª¨ë“œ
        urlInput.style.display = 'block';
        urlSelect.style.display = 'none';
        manualBtn.innerHTML = 'ğŸŒ';
        manualBtn.setAttribute('data-tooltip', 'ì‚¬ì´íŠ¸ ì„ íƒ');
        autoControls.style.display = 'flex';  // ìë™ ê°€ì ¸ì˜¤ê¸° ë²„íŠ¼
        manualControls.style.display = 'none';
        urlInput.value = '';
 
        console.log('URL ì…ë ¥ ëª¨ë“œë¡œ ì „í™˜ - ìë™ ê°€ì ¸ì˜¤ê¸°');
      }
    }

    // ë ˆì´ì§€ ë¡œë”© ì²˜ë¦¬ í•¨ìˆ˜
    function processLazyLoading() {
      const originalCode = document.getElementById('originalCode').value;
      
      // HTML íŒŒì‹±
      const parser = new DOMParser();
      const doc = parser.parseFromString(originalCode, 'text/html');
      
      // ë ˆì´ì§€ ë¡œë”© ì´ë¯¸ì§€ ì²˜ë¦¬
      const images = doc.querySelectorAll('img[data-src]');
      images.forEach(img => {
        if (img.dataset.src) {
          img.src = img.dataset.src;
          img.removeAttribute('data-src');
        }
        if (img.dataset.original) {
          img.src = img.dataset.original;
          img.removeAttribute('data-original');
        }
        if (img.getAttribute('ec-data-src')) {
          img.src = img.getAttribute('ec-data-src');
          img.removeAttribute('ec-data-src');
        }
        if (img.getAttribute('lazy-src')) {
          img.src = img.getAttribute('lazy-src');
          img.removeAttribute('lazy-src');
        }
      });
      
      // ë¶ˆí•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ ì œê±°
      const scripts = doc.querySelectorAll('script');
      scripts.forEach(script => script.remove());
      
      // ê²°ê³¼ ì—…ë°ì´íŠ¸
      document.getElementById('originalCode').value = doc.body.innerHTML;
    }

    // ì°¾ê¸°/ë°”ê¾¸ê¸° í•­ëª© ì¶”ê°€ í•¨ìˆ˜
    function addFindReplace() {
      const findText = document.getElementById('findText').value;
      const replaceText = document.getElementById('replaceText').value;
      
      if (!findText || !replaceText) {
        alert('ì°¾ê¸°/ë°”ê¾¸ê¸° í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      const additionalFindReplace = document.getElementById('additionalFindReplace');
      additionalFindReplace.style.display = 'block';
      
      // ìƒˆë¡œìš´ ì°¾ê¸°/ë°”ê¾¸ê¸° í•­ëª© ìƒì„±
      const newItem = document.createElement('div');
      newItem.className = 'glass-find-replace-item';
      newItem.innerHTML = `
        <div class="glass-find-replace-item-content">
          <input type="text" class="glass-find-replace-item-find" value="${escapeHtml(findText)}" />
          <input type="text" class="glass-find-replace-item-replace" value="${escapeHtml(replaceText)}" />
          <button class="btn-remove" onclick="removeFindReplace(this)">&times;</button>
        </div>
      `;
      
      // ì¶”ê°€ëœ í•­ëª©ì„ ì¶”ê°€
      additionalFindReplace.appendChild(newItem);
      
      // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™” ë° í˜„ì¬ í™œì„±í™”ëœ í”„ë¦¬ì…‹ì— ë”°ë¥¸ ê°’ ìë™ ì…ë ¥
      document.getElementById('replaceText').value = '';
      
      // í˜„ì¬ í™œì„±í™”ëœ í”„ë¦¬ì…‹ ì°¾ê¸°
      const activePreset = document.querySelector('.btn-preset.active');
      if (activePreset) {
        const presetType = activePreset.getAttribute('onclick').match(/setPreset\('(\w+)'/)[1];
        const presets = {
          selective: '/250617\\/(23|25)\\.(jpg|png)/g',
          date: '250617',
          image: '/images/old/'
        };
        document.getElementById('findText').value = presets[presetType];
      } else {
        document.getElementById('findText').value = '/250617\\/(23|25)\\.(jpg|png)/g';
      }
      
      document.getElementById('findText').focus();
    }

    // ì°¾ê¸°/ë°”ê¾¸ê¸° í•­ëª© ì œê±° í•¨ìˆ˜
    function removeFindReplace(button) {
      const item = button.closest('.glass-find-replace-item');
      if (item) {
        item.remove();
        const additionalFindReplace = document.getElementById('additionalFindReplace');
        if (additionalFindReplace.children.length === 0) {
          additionalFindReplace.style.display = 'none';
        }
      }
    }

    // ê²°ê³¼ ë³µì‚¬ í•¨ìˆ˜
    function copyResult() {
      const resultContent = document.getElementById('resultContent').textContent;
      
      if (!resultContent.trim()) {
        alert('ë³µì‚¬í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }
      
      navigator.clipboard.writeText(resultContent).then(() => {
        const copyBtn = document.querySelector('.copy-btn-sm');
        const originalText = copyBtn.textContent;
        
        copyBtn.textContent = 'âœ“ ë³µì‚¬ë¨';
        copyBtn.classList.add('copied');
        
        setTimeout(() => {
          copyBtn.textContent = originalText;
          copyBtn.classList.remove('copied');
        }, 2000);
      }).catch(() => {
        // í´ë¦½ë³´ë“œ APIê°€ ì§€ì›ë˜ì§€ ì•ŠëŠ” ê²½ìš°
        const textArea = document.createElement('textarea');
        textArea.value = resultContent;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        
        alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
      });
    }

    // ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥
    function previewCode() {
      const originalCode = document.getElementById('originalCode').value;
      const newCode = document.getElementById('newCode').value || originalCode;
      if (!originalCode.trim()) {
        alert('ê¸°ì¡´ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      // URL ì…ë ¥í•„ë“œì—ì„œ ë² ì´ìŠ¤ ê²½ë¡œ ì¶”ì¶œ
      const pageUrl = getCurrentUrl();
      let basePath = '';
      if (pageUrl && pageUrl.startsWith('http')) {
        try {
          basePath = new URL(pageUrl).origin;
        } catch (e) {
          console.log('URL íŒŒì‹± ì‹¤íŒ¨:', e);
        }
      }
      
      // ì´ë¯¸ì§€ ê²½ë¡œë¥¼ ì ˆëŒ€ê²½ë¡œë¡œ ë³€í™˜
      let previewCode = newCode;
      if (basePath) {
        // src="ìƒëŒ€ê²½ë¡œ"ë¥¼ src="ì ˆëŒ€ê²½ë¡œ"ë¡œ ë³€í™˜
        previewCode = previewCode.replace(/src="(?!https?:\/\/|\/\/|data:)([^"]+)"/g, function(match, relativePath) {
          // ìƒëŒ€ê²½ë¡œê°€ /ë¡œ ì‹œì‘í•˜ë©´ basePath ë’¤ì— ë°”ë¡œ ë¶™ì´ê³ , ì•„ë‹ˆë©´ /ë¥¼ ì¶”ê°€
          if (relativePath.startsWith('/')) {
            return 'src="' + basePath + relativePath + '"';
          } else {
            return 'src="' + basePath + '/' + relativePath + '"';
          }
        });
      }
      
      // position: absoluteë¥¼ position: staticìœ¼ë¡œ ë³€ê²½í•˜ê³  ê´€ë ¨ ì†ì„± ì •ë¦¬
      previewCode = previewCode.replace(/position:\s*absolute/g, 'position: static');
      previewCode = previewCode.replace(/position:\s*fixed/g, 'position: static');
      
      // absolute/fixed í¬ì§€ì…”ë‹ê³¼ í•¨ê»˜ ì‚¬ìš©ë˜ë˜ ë¶ˆí•„ìš”í•œ ì†ì„±ë“¤ ì œê±°
      // ì†ì„± ë’¤ì— ì„¸ë¯¸ì½œë¡ ì´ ìˆëŠ” ê²½ìš°
      previewCode = previewCode.replace(/;\s*top:\s*[^;]+/g, '');
      previewCode = previewCode.replace(/;\s*left:\s*[^;]+/g, '');
      previewCode = previewCode.replace(/;\s*right:\s*[^;]+/g, '');
      previewCode = previewCode.replace(/;\s*bottom:\s*[^;]+/g, '');
      previewCode = previewCode.replace(/;\s*z-index:\s*[^;]+/g, '');
      
      // ì†ì„±ì´ ë§¨ ì•ì— ì˜¤ëŠ” ê²½ìš° (top: 10px; ê°™ì€ í˜•íƒœ)
      previewCode = previewCode.replace(/top:\s*[^;]+;\s*/g, '');
      previewCode = previewCode.replace(/left:\s*[^;]+;\s*/g, '');
      previewCode = previewCode.replace(/right:\s*[^;]+;\s*/g, '');
      previewCode = previewCode.replace(/bottom:\s*[^;]+;\s*/g, '');
      previewCode = previewCode.replace(/z-index:\s*[^;]+;\s*/g, '');
      
      // ìƒˆ ì°½ìœ¼ë¡œ ë¯¸ë¦¬ë³´ê¸° ì—´ê¸°
      const previewWindow = window.open('about:blank', '_blank', 'width=1200,height=800,scrollbars=yes');
      
      setTimeout(() => {
        previewWindow.document.head.innerHTML = 
          '<link rel="stylesheet" href="assets/css/common.css">' +
          '<style>body { margin: 0; }</style>';
        
        previewWindow.document.body.className = 'glass-preview-wrapper';
        previewWindow.document.body.innerHTML = 
          '<div id="mediaStats" class="glass-media-stats">ë¯¸ë””ì–´ íŒŒì¼ì„ í™•ì¸í•˜ëŠ” ì¤‘...</div>' +
          '<div id="mediaGallery" class="glass-gallery"></div>' +
          '<div id="previewContent" style="display: none;">' +
          previewCode +
          '</div>';
        
        setTimeout(() => {
          // DOM ìˆœì„œëŒ€ë¡œ ì´ë¯¸ì§€ì™€ ì˜ìƒì„ í•¨ê»˜ ìˆ˜ì§‘ (modal ì œì™¸)
          const allMediaElements = previewWindow.document.querySelectorAll('img, video');
          const allMedia = [];
          
          // DOM ìˆœì„œëŒ€ë¡œ ë¯¸ë””ì–´ ìš”ì†Œë“¤ ìˆ˜ì§‘ (modal_wrap ë‚´ë¶€ ì œì™¸)
          allMediaElements.forEach((element) => {
            // modal_wrap ë‚´ë¶€ì— ìˆëŠ”ì§€ í™•ì¸
            const isInModal = element.closest('.modal_wrap, .modal-wrap, .modal, [class*="modal"]');
            if (isInModal) {
              return; // ëª¨ë‹¬ ë‚´ë¶€ë©´ ì œì™¸
            }
            
            if (element.tagName === 'IMG') {
              allMedia.push({ element: element, type: 'image' });
            } else if (element.tagName === 'VIDEO') {
              allMedia.push({ element: element, type: 'video' });
            }
          });
          
          const images = allMedia.filter(media => media.type === 'image');
          const videos = allMedia.filter(media => media.type === 'video');
          
          // ë¯¸ë¦¬ ìƒì„±ëœ ë¯¸ë””ì–´ ê°¤ëŸ¬ë¦¬ ìš”ì†Œ ì‚¬ìš©
          const mediaGallery = previewWindow.document.getElementById('mediaGallery');
          
          // ì˜ìƒ ì¹´ìš´í„° ì´ˆê¸°í™”
          let videoCounter = 0;
          
          // í†µí•© ìˆœë²ˆìœ¼ë¡œ ì²˜ë¦¬
          allMedia.forEach((media, index) => {
            const element = media.element;
            const src = element.getAttribute('src') || '';
            const isAbsolute = src.startsWith('http') || src.startsWith('//');
            const isVideo = media.type === 'video';
            
            // íŒŒì¼ëª… ì²˜ë¦¬ - ì˜ìƒì€ ìˆœì°¨ì  ì´ë¦„ ì‚¬ìš©
            let filename;
            if (isVideo) {
              videoCounter++;
              filename = 'video_' + String(videoCounter).padStart(2, '0');
            } else {
              filename = src.split('/').pop() || src.split('?')[0].split('/').pop() || '';
              // íŒŒì¼ëª… ì „ì²´ í‘œì‹œ (ì¤„ì„í‘œ ì²˜ë¦¬ ì œê±°)
            }
            
            // wrapper ìƒì„±
            const wrapper = previewWindow.document.createElement('div');
            wrapper.className = 'glass-media-wrapper ' + (isVideo ? 'glass-media-wrapper-video' : 'glass-media-wrapper-image');
            
            // ìƒˆë¡œìš´ ë¯¸ë””ì–´ ìš”ì†Œ ìƒì„± (ë³µì‚¬)
            const newElement = element.cloneNode(true);
            newElement.className = 'glass-media-element';
            
            // íŒŒì¼ëª… ë±ƒì§€ ìƒì„±
            const badge = previewWindow.document.createElement('div');
            badge.className = 'glass-media-badge ' + (isAbsolute ? 'glass-media-badge-success' : 'glass-media-badge-warning');
            badge.textContent = filename || (isVideo ? 'video' : 'image');
            
            // ë¡œë”©/ì—ëŸ¬ ìƒíƒœ í‘œì‹œìš© ì˜¤ë²„ë ˆì´ ìƒì„±
            const overlay = previewWindow.document.createElement('div');
            overlay.className = 'glass-media-overlay';
            overlay.innerHTML = 'â³ ë¡œë”© ì¤‘...';
            
            // ì´ë¯¸ì§€ ë¡œë“œ ì„±ê³µ/ì‹¤íŒ¨ ì²˜ë¦¬
            if (!isVideo) {
              newElement.onload = function() {
                // ë¡œë“œ ì„±ê³µ ì‹œ ì˜¤ë²„ë ˆì´ ì œê±°
                if (overlay.parentNode) {
                  overlay.remove();
                }
              };
              
              newElement.onerror = function() {
                // ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ í‘œì‹œ
                overlay.className = 'glass-media-overlay glass-media-overlay-error';
                overlay.innerHTML = '<p>âŒ ë¡œë“œ ì‹¤íŒ¨</p><small class="glass-media-overlay-text">ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</small>';
                
                // wrapper í…Œë‘ë¦¬ ë³€ê²½ì€ CSSë¡œ ì²˜ë¦¬
                wrapper.style.borderStyle = 'dashed';
                
                // íŒŒì¼ëª… ë±ƒì§€ë„ ì—ëŸ¬ ìƒ‰ìƒìœ¼ë¡œ ë³€ê²½
                badge.className = 'glass-media-badge glass-media-badge-error';
              };
            } else {
              // ë¹„ë””ì˜¤ëŠ” ë¡œë“œë˜ë©´ ì˜¤ë²„ë ˆì´ ì œê±°
              newElement.onloadeddata = function() {
                if (overlay.parentNode) {
                  overlay.remove();
                }
              };
              
              newElement.onerror = function() {
                // ë¹„ë””ì˜¤ ë¡œë“œ ì‹¤íŒ¨ ì‹œ
                overlay.className = 'glass-media-overlay glass-media-overlay-error';
                overlay.innerHTML = '<p>âŒ ì¬ìƒ ë¶ˆê°€</p><small class="glass-media-overlay-text">ë¹„ë””ì˜¤ íŒŒì¼ ì˜¤ë¥˜</small>';
                
                wrapper.style.borderStyle = 'dashed';
                badge.className = 'glass-media-badge glass-media-badge-error';
              };
            }
            
            // ìˆœë²ˆ ë±ƒì§€ ìƒì„±
            const numberBadge = previewWindow.document.createElement('div');
            numberBadge.className = 'glass-media-number ' + (isVideo ? 'glass-media-number-video' : 'glass-media-number-image');
            numberBadge.textContent = index + 1;
            
            // wrapperì— ìš”ì†Œë“¤ ì¶”ê°€
            wrapper.appendChild(newElement);
            wrapper.appendChild(overlay); // ë¡œë”©/ì—ëŸ¬ ì˜¤ë²„ë ˆì´ ì¶”ê°€
            wrapper.appendChild(badge);
            wrapper.appendChild(numberBadge);
            
            // ê°¤ëŸ¬ë¦¬ì— wrapper ì¶”ê°€
            mediaGallery.appendChild(wrapper);
          });
          
          // ê°¤ëŸ¬ë¦¬ëŠ” ì´ë¯¸ HTMLì—ì„œ ìƒì„±ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ë³„ë„ ì¶”ê°€ ë¶ˆí•„ìš”
          
          // ê¹”ë”í•œ í†µê³„ í‘œì‹œ (ìƒë‹¨)
          const mediaStats = previewWindow.document.getElementById('mediaStats');
          const totalCount = images.length + videos.length;
          
          if (totalCount > 0) {
            // ê°„ë‹¨í•œ í•œ ì¤„ ìŠ¤íƒ€ì¼ HTML ìƒì„±
            let statsText = '<span class="highlight">ì´ ë¯¸ë””ì–´ íŒŒì¼ ' + totalCount + 'ê°œ</span>';
            
            if (images.length > 0 && videos.length > 0) {
              statsText += '<span class="separator">â€¢</span>ì´ë¯¸ì§€ (' + images.length + 'ê°œ)<span class="separator">â€¢</span>ì˜ìƒ (' + videos.length + 'ê°œ)';
            } else if (images.length > 0) {
              statsText += '<span class="separator">â€¢</span>ì´ë¯¸ì§€ (' + images.length + 'ê°œ)';
            } else if (videos.length > 0) {
              statsText += '<span class="separator">â€¢</span>ì˜ìƒ (' + videos.length + 'ê°œ)';
            }
            
            statsText += '<span class="separator">â€¢</span>ì´ ìš©ëŸ‰ <span class="highlight" id="totalSize">ê³„ì‚° ì¤‘...</span>';
            
            let statsHTML = 
              '<div class="glass-media-stats-line">' +
              statsText +
              '</div>';
            
            mediaStats.innerHTML = statsHTML;
            
            // ë¯¸ë””ì–´ íŒŒì¼ ìš©ëŸ‰ ê³„ì‚°
            calculateMediaSizes(previewWindow, allMedia);
          } else {
            mediaStats.innerHTML = 
              '<div class="glass-no-media">' +
              '<div class="glass-no-media-icon">ğŸ“­</div>' +
              '<div class="glass-no-media-title">ë¯¸ë””ì–´ íŒŒì¼ì´ ë°œê²¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤</div>' +
              '<div class="glass-no-media-desc">ì´ë¯¸ì§€ë‚˜ ì˜ìƒì´ í¬í•¨ëœ í˜ì´ì§€ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”</div>' +
              '</div>';
          }
        }, 100);
      }, 100);
    }

    // ë¯¸ë””ì–´ íŒŒì¼ ìš©ëŸ‰ ê³„ì‚° í•¨ìˆ˜
    function calculateMediaSizes(previewWindow, allMedia) {
      let totalSize = 0;
      let completedRequests = 0;
      let successfulRequests = 0;
      const totalRequests = allMedia.length;
      
      // ìš©ëŸ‰ì„ ì½ê¸° ì‰¬ìš´ í˜•íƒœë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
      function formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
      }
      
      // ìš©ëŸ‰ ì •ë³´ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ê°„ë‹¨í•œ í•œ ì¤„ ìŠ¤íƒ€ì¼)
      function updateSizeInfo() {
        const totalSizeElement = previewWindow.document.getElementById('totalSize');
        if (!totalSizeElement) return;
        
        if (completedRequests === totalRequests) {
          if (successfulRequests > 0) {
            const avgSize = totalSize / successfulRequests;
            const estimatedTotal = avgSize * totalRequests;
            
            // ì‹ ë¢°ì„± ê³„ì‚°
            const accuracy = Math.round((successfulRequests / totalRequests) * 100);
            
            const displaySize = formatFileSize(successfulRequests < totalRequests ? estimatedTotal : totalSize);
            totalSizeElement.textContent = displaySize;
          } else {
            totalSizeElement.textContent = 'ê³„ì‚° ì‹¤íŒ¨';
          }
        } else {
          const progress = Math.round((completedRequests / totalRequests) * 100);
          totalSizeElement.textContent = 'ê³„ì‚° ì¤‘... ' + progress + '%';
        }
      }
      
      // ê° ë¯¸ë””ì–´ íŒŒì¼ì˜ ìš©ëŸ‰ í™•ì¸
      allMedia.forEach((media, index) => {
        const src = media.element.getAttribute('src') || '';
        
        if (!src || (!src.startsWith('http') && !src.startsWith('//'))) {
          // ìƒëŒ€ ê²½ë¡œë‚˜ ì˜ëª»ëœ URLì¸ ê²½ìš°
          completedRequests++;
          updateSizeInfo();
          return;
        }
        
        // HEAD ìš”ì²­ìœ¼ë¡œ íŒŒì¼ í¬ê¸° í™•ì¸
        fetch(src, { 
          method: 'HEAD',
          mode: 'cors',
          cache: 'no-cache'
        })
        .then(response => {
          completedRequests++;
          
          if (response.ok) {
            const contentLength = response.headers.get('content-length');
            if (contentLength) {
              const size = parseInt(contentLength, 10);
              if (!isNaN(size) && size > 0) {
                totalSize += size;
                successfulRequests++;
              }
            }
          }
          
          updateSizeInfo();
        })
        .catch(error => {
          // CORS ì˜¤ë¥˜ë‚˜ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ
          completedRequests++;
          
          // ì´ë¯¸ì§€ì¸ ê²½ìš° ëŒ€ì•ˆì  ë°©ë²• ì‹œë„ (ìì—°ìŠ¤ëŸ¬ìš´ í¬ê¸° ê¸°ë°˜ ì¶”ì •)
          if (media.type === 'image') {
            const img = media.element;
            if (img.naturalWidth && img.naturalHeight) {
              // ëŒ€ëµì ì¸ í¬ê¸° ì¶”ì • (í•´ìƒë„ ê¸°ë°˜)
              const estimatedSize = img.naturalWidth * img.naturalHeight * 3; // RGB ê¸°ì¤€ ëŒ€ëµ ì¶”ì •
              totalSize += estimatedSize;
              successfulRequests++;
            }
          }
          
          updateSizeInfo();
        });
      });
      
      // ìš”ì²­ì´ ì—†ëŠ” ê²½ìš° ì¦‰ì‹œ ì—…ë°ì´íŠ¸
      if (totalRequests === 0) {
        updateSizeInfo();
      }
    }

    // URL ê°’ ê°€ì ¸ì˜¤ê¸° (input ë˜ëŠ” selectì—ì„œ)
    function getCurrentUrl() {
      const urlInput = document.getElementById('pageUrl');
      const urlSelect = document.getElementById('pageUrlSelect');
      
      if (urlInput.style.display !== 'none') {
        return urlInput.value.trim();
      } else {
        return urlSelect.value.trim();
      }
    }

  </script>

  <script src="assets/js/common.js" defer></script>
  <script src="assets/js/site-ui.js" defer></script>
  
  <script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì„ íƒì  ë³€ê²½ í”„ë¦¬ì…‹ ìë™ ì„¤ì •
    document.addEventListener('DOMContentLoaded', function() {
      // ì„ íƒì  ë³€ê²½ í”„ë¦¬ì…‹ ê°’ ì„¤ì •
        document.getElementById('findText').value = '/250617\\/(23|25)\\.(jpg|png)/g';
      document.getElementById('replaceText').value = '250701/$1.$2';
    });
  </script>
</body>
</html> 